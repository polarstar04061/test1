(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95,958],{35821:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(95155),r=t(12115),o=t(35695),n=t(32214),i=t(79835),d=t(33622),l=t(60902),c=t(91867),u=t(75049),p=t(68309),h=t(90221),m=t(62177),A=t(89958),g=t(97612);let w=p.Ik({password:p.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Must contain at least one uppercase letter").regex(/[a-z]/,"Must contain at least one lowercase letter").regex(/[0-9]/,"Must contain at least one number").regex(/[^A-Za-z0-9]/,"Must contain at least one special character"),confirmPassword:p.Yj()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function v(e){let{params:s,searchParams:t}=e,p=(0,o.useRouter)(),{showSuccess:v,showError:x}=(0,g.i)(),[P,f]=(0,r.useState)("de"),[j,C]=(0,r.useState)(null),[_,y]=(0,r.useState)(""),[E,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{Promise.all([s,t]).then(e=>{let[s,t]=e;f(s.locale),C(t.oobCode||null)})},[s,t]);let{register:I,handleSubmit:N,watch:R,formState:{errors:q,isSubmitting:T,isValid:k,dirtyFields:S}}=(0,m.mN)({resolver:(0,h.u)(w),mode:"onChange"}),O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return 0;let s=0;return e.length>=8&&(s+=25),/[A-Z]/.test(e)&&(s+=25),/[0-9]/.test(e)&&(s+=25),/[^A-Za-z0-9]/.test(e)&&(s+=25),s}(R("password")),z=async e=>{try{let s={token:j,password:e.password},t=await (0,A.xw)(s);t.success?v(t.message):x(t.message),setTimeout(()=>p.push("/".concat(P,"/auth/login")),2e3)}catch(e){x(e.message)}};return(0,a.jsxs)(u.A,{title:"Reset Password",locale:P,children:[_&&(0,a.jsx)(n.A,{variant:"danger",children:_}),E&&(0,a.jsx)(n.A,{variant:"success",children:"Passwort erfolgreich zur\xfcckgesetzt! Weiterleitung zur Anmeldung..."}),(0,a.jsxs)(i.A,{onSubmit:N(z),children:[(0,a.jsxs)(i.A.Group,{className:"mb-3",controlId:"password",children:[(0,a.jsx)(i.A.Label,{children:"Neues Passwort"}),(0,a.jsx)(i.A.Control,{type:"password",isInvalid:!!q.password,...I("password"),placeholder:"At least 8 characters"}),q.password&&(0,a.jsx)(i.A.Control.Feedback,{type:"invalid",children:q.password.message}),S.password&&(0,a.jsx)(d.A,{now:O,className:"mt-2",style:{height:"10px"},variant:O<50?"danger":O<75?"warning":"success"})]}),(0,a.jsxs)(i.A.Group,{className:"mb-3",controlId:"confirmPassword",children:[(0,a.jsx)(i.A.Label,{children:"Passwort best\xe4tigen"}),(0,a.jsx)(i.A.Control,{type:"password",isInvalid:!!q.confirmPassword,...I("confirmPassword"),placeholder:"Re-enter your password"}),q.confirmPassword&&(0,a.jsx)(i.A.Control.Feedback,{type:"invalid",children:q.confirmPassword.message})]}),(0,a.jsx)(l.A,{variant:"primary",type:"submit",disabled:T||!k||!j,className:"w-100",children:T?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Zur\xfccksetzen..."]}):"Passwort zur\xfccksetzen"})]})]})}},58162:(e,s,t)=>{Promise.resolve().then(t.bind(t,35821))},61042:(e,s,t)=>{"use strict";t.d(s,{SnackbarProvider:()=>d,d:()=>l});var a=t(95155),r=t(12115),o=t(75824),n=t(9665);let i=(0,r.createContext)(null),d=e=>{let{children:s}=e,[t,d]=(0,r.useState)({open:!1,message:"",severity:"info"}),l=()=>d({...t,open:!1});return(0,a.jsxs)(i.Provider,{value:(e,s)=>{d({open:!0,message:e,severity:s})},children:[s,(0,a.jsx)(o.A,{open:t.open,autoHideDuration:3e3,onClose:l,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{top:"80px !important"},children:(0,a.jsx)(n.A,{onClose:l,severity:t.severity,sx:{width:"100%"},children:t.message})})]})},l=()=>(0,r.useContext)(i)},75049:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var a=t(95155),r=t(92809),o=t(76355),n=t(6874),i=t.n(n);function d(e){let{children:s,title:t,locale:n="en"}=e;return(0,a.jsx)(r.A,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:(0,a.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[(0,a.jsx)(o.A,{children:(0,a.jsxs)(o.A.Body,{className:"shadow",children:[(0,a.jsx)("h2",{className:"text-center mb-4",children:t}),s]})}),(0,a.jsx)("div",{className:"w-100 text-center mt-2",children:(0,a.jsx)(i(),{href:"/".concat(n,"/auth/login"),children:"Zur\xfcck zur Anmeldung"})})]})})}},89958:(e,s,t)=>{"use strict";t.d(s,{Lx:()=>n,forgotPassword:()=>i,xw:()=>d,y4:()=>l});var a=t(99572),r=t(96446);let o=new a.Q,n=e=>o.create(r.wz,e),i=e=>o.create(r.s_,e),d=e=>o.update(r.Ou+e.token,e),l=()=>o.delete(r.b6)},96446:(e,s,t)=>{"use strict";t.d(s,{F1:()=>r,Hv:()=>o,OE:()=>i,OQ:()=>n,Ou:()=>u,W3:()=>d,Zs:()=>a,aF:()=>m,b6:()=>p,s_:()=>c,wz:()=>l,yZ:()=>h});let a="/api/qrcode/generate-qrcode",r="/api/qrcode/get-qrcode-data",o="/api/qrcode/get-qrcode-data-by-admin",n="/api/qrcode/verify-password",i="/api/qrcode/update-qrcode-data",d="/api/qrcode/get-qrcode-page-token",l="/api/auth/login",c="/api/auth/forgot-password",u="/api/auth/reset-password/",p="/api/auth/logout",h="/api/dashboard/get-user-data-by-page",m="/api/dashboard/reset-qrcode-password"},97612:(e,s,t)=>{"use strict";t.d(s,{i:()=>r});var a=t(61042);let r=()=>{let e=(0,a.d)();return{showSuccess:s=>e(s,"success"),showError:s=>e(s,"error"),showWarning:s=>e(s,"warning"),showInfo:s=>e(s,"info")}}},99572:(e,s,t)=>{"use strict";t.d(s,{Q:()=>d});var a=t(23464),r=t(49509);let o={API_URL:"https://deinetierfamilie.com/",AUTH_BACKEND:"Dummy",FIRE_BASE:{API_KEY:r.env.REACT_APP_APIKEY,AUTH_DOMAIN:r.env.REACT_APP_AUTHDOMAIN,PROJECTID:r.env.REACT_APP_PROJECTID,STORAGEBUCKET:r.env.REACT_APP_STORAGEBUCKET,MESSAGINGSENDERID:r.env.REACT_APP_MESSAGINGSENDERID,APPID:r.env.REACT_APP_APPID}};var n=t(79971);a.A.defaults.baseURL=o.API_URL;let i=o.API_URL;a.A.defaults.headers.post["Content-Type"]="application/json",a.A.interceptors.response.use(function(e){return e.data?e.data:e});class d{request(e){return new Promise((s,t)=>{this._axios.request(e).then(e=>{s(e.data)}).catch(e=>{var s;t((null==(s=e.response)?void 0:s.data)||e.message)})})}constructor(){var e=this;this._axios=a.A.create({baseURL:i,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.logout=()=>{(0,n.setCookie)("auth_token",""),window.location.href="/en/auth/login"},this.addRequestInterceptor=(e,s)=>{this._axios.interceptors.request.use(e,s)},this.addResponseInterceptor=(e,s)=>{this._axios.interceptors.response.use(e,s)},this.get=async function(s,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json";return e.request({method:"get",url:s,params:t,responseType:a})},this.create=async(e,s)=>await this.request(this.getOptionsConfig("post",e,s)),this.put=async(e,s)=>await this.request(this.getOptionsConfig("put",e,s)),this.update=async(e,s)=>await this.request(this.getOptionsConfig("patch",e,s)),this.delete=async(e,s)=>this.request({method:"delete",url:e,params:s}),this.getOptionsConfig=(e,s,t)=>{let a={"Content-Type":"application/json"};return t instanceof FormData&&delete a["Content-Type"],{method:e,url:s,data:t,headers:a}},this._axios.interceptors.response.use(e=>e,e=>{var s,t,a,r,o,n,i,d;return((null==(s=e.response)?void 0:s.status)===401&&this.logout(),(null==(t=e.response)?void 0:t.status)===400||(null==(a=e.response)?void 0:a.status)===500||(null==(r=e.response)?void 0:r.status)===401)?Promise.resolve(e.response):(((null==(n=e.response)||null==(o=n.data)?void 0:o.message)=="Token is not valid"||(null==(d=e.response)||null==(i=d.data)?void 0:i.message)=="No token, authorization denied")&&this.logout(),Promise.reject(e))})}}}},e=>{var s=s=>e(e.s=s);e.O(0,[54,957,671,764,874,835,387,441,684,358],()=>s(58162)),_N_E=e.O()}]);