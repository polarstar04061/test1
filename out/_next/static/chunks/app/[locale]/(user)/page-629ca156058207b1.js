(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{16938:(e,t,a)=>{"use strict";a.d(t,{BE:()=>c,Ck:()=>n,VO:()=>o,og:()=>u,pd:()=>l,r8:()=>d});var s=a(99572),r=a(96446);let i=new s.Q,n=e=>i.create(r.Zs,e),o=e=>i.get(r.F1,e),l=e=>i.get(r.Hv,e),d=e=>i.get(r.W3,e),c=e=>i.create(r.OQ,e),u=e=>i.create(r.OE,e)},38931:(e,t,a)=>{Promise.resolve().then(a.bind(a,95460))},95460:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(95155),r=a(17652),i=a(12115),n=a(92809),o=a(32214),l=a(51770),d=a(91867),c=a(60902),u=a(71581),h=a(35695),p=a(16938);function g(e){let{show:t,onScan:a,onClose:r}=e,n=(0,h.useRouter)();(0,h.useParams)().locale;let[g,v]=(0,i.useState)(null),[m,f]=(0,i.useState)(null),[A,E]=(0,i.useState)("environment");(0,i.useEffect)(()=>{t&&(async()=>{try{var e;if(!(null==(e=navigator.mediaDevices)?void 0:e.getUserMedia))throw Error("Kamera-API wird in diesem Browser nicht unterst\xfctzt.");let t=await navigator.mediaDevices.getUserMedia({video:{facingMode:A,width:{ideal:1280},height:{ideal:720}}}),a=t.getVideoTracks();if(0===a.length)throw Error("Keine Videospur gefunden");t.getTracks().forEach(e=>e.stop()),v(!0)}catch(e){console.error("Fehler beim Zugriff auf die Kamera:",e),f(e instanceof Error?e.message:"Zugriff auf Kamera fehlgeschlagen"),v(!1)}})()},[t,A]);let w=async e=>{var t,s,i;a(null==(t=e[0])?void 0:t.rawValue);try{let t={qrId:null==(s=e[0])?void 0:s.rawValue};(await (0,p.r8)(t)).success&&n.push(null==(i=e[0])?void 0:i.rawValue)}catch(e){console.error("QR Scanner Error:",e)}r()};return(0,s.jsxs)(l.A,{show:t,onHide:r,size:"lg",centered:!0,backdrop:"static",children:[(0,s.jsx)(l.A.Header,{closeButton:!0,children:(0,s.jsx)(l.A.Title,{children:"QR-Code scannen"})}),(0,s.jsx)(l.A.Body,{className:"text-center",children:null===g?(0,s.jsxs)("div",{className:"d-flex flex-column align-items-center py-4",children:[(0,s.jsx)(d.A,{animation:"border",variant:"primary"}),(0,s.jsx)("p",{className:"mt-3",children:"Kamera wird initialisiert..."})]}):m?(0,s.jsxs)(o.A,{variant:"danger",children:[(0,s.jsx)(o.A.Heading,{children:"Kamerafehler"}),(0,s.jsx)("p",{children:m}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)(c.A,{variant:"primary",size:"sm",onClick:()=>window.location.reload(),children:"Erneut versuchen"})})]}):(0,s.jsx)("div",{style:{position:"relative",paddingTop:"100%",backgroundColor:"#000"},children:(0,s.jsx)(u.Lp,{constraints:{facingMode:A,width:{ideal:1280},height:{ideal:720}},scanDelay:300,onScan:w,onError:e=>{console.error("QR Scanner Error:",e),f(e instanceof Error?e.message:"Ein unbekannter Fehler ist aufgetreten.")},styles:{container:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},video:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}})})}),(0,s.jsx)(l.A.Footer,{children:(0,s.jsx)(c.A,{variant:"primary",onClick:r,children:"Schlie\xdfen"})})]})}function v(e){let{params:t}=e;(0,r.c3)("Home");let[l,d]=(0,i.useState)("de");(0,i.useEffect)(()=>{t.then(e=>{d(e.locale)}),navigator.mediaDevices||Promise.resolve().then(a.bind(a,41648)).then(e=>{})},[t]);let[c,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(null),[v,m]=(0,i.useState)(null);return(0,s.jsxs)(n.A,{className:"py-5 page-container",children:[(0,s.jsx)("h1",{className:"text-center mb-4",children:"QR Code Scanner"}),(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)("a",{className:"btn btn-custom",onClick:()=>u(!0),children:"QR-Code scannen"})}),v&&(0,s.jsx)(o.A,{variant:"danger",onClose:()=>m(null),dismissible:!0,children:v}),(0,s.jsx)(g,{show:c,onScan:e=>{p(e),m(null)},onClose:()=>u(!1)})]})}},96446:(e,t,a)=>{"use strict";a.d(t,{F1:()=>r,GZ:()=>g,Hv:()=>i,ND:()=>E,OE:()=>o,OQ:()=>n,Ou:()=>h,W3:()=>l,Zs:()=>s,aF:()=>A,aV:()=>v,b6:()=>p,fo:()=>m,oi:()=>d,p6:()=>C,pY:()=>w,rk:()=>x,s_:()=>u,wz:()=>c,yZ:()=>f});let s="/api/qrcode/generate-qrcode",r="/api/qrcode/get-qrcode-data",i="/api/qrcode/get-qrcode-data-by-admin",n="/api/qrcode/verify-password",o="/api/qrcode/update-qrcode-data",l="/api/qrcode/get-qrcode-page-token",d="/api/auth/register",c="/api/auth/login",u="/api/auth/forgot-password",h="/api/auth/reset-password/",p="/api/auth/logout",g="/api/auth/verify-2fa-login",v="/api/auth/resend-2fa-code",m="/api/auth/verify-email",f="/api/dashboard/get-user-data-by-page",A="/api/dashboard/reset-qrcode-password",E="/api/dashboard/generate-qrcodes-by-count",w="/api/dashboard/get-all-qrcode-urls",C="/api/profile/get-user-profile-data",x="/api/profile/create-user-profile-data"},99572:(e,t,a)=>{"use strict";a.d(t,{Q:()=>l});var s=a(23464),r=a(49509);let i={API_URL:"https://deinetierfamilie.com/",AUTH_BACKEND:"Dummy",FIRE_BASE:{API_KEY:r.env.REACT_APP_APIKEY,AUTH_DOMAIN:r.env.REACT_APP_AUTHDOMAIN,PROJECTID:r.env.REACT_APP_PROJECTID,STORAGEBUCKET:r.env.REACT_APP_STORAGEBUCKET,MESSAGINGSENDERID:r.env.REACT_APP_MESSAGINGSENDERID,APPID:r.env.REACT_APP_APPID}};var n=a(79971);s.A.defaults.baseURL=i.API_URL;let o=i.API_URL;s.A.defaults.headers.post["Content-Type"]="application/json",s.A.interceptors.response.use(function(e){return e.data?e.data:e});class l{request(e){return new Promise((t,a)=>{this._axios.request(e).then(e=>{t(e.data)}).catch(e=>{var t;a((null==(t=e.response)?void 0:t.data)||e.message)})})}constructor(){var e=this;this._axios=s.A.create({baseURL:o,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.logout=()=>{(0,n.setCookie)("auth_token",""),window.location.href="/de/auth/login"},this.addRequestInterceptor=(e,t)=>{this._axios.interceptors.request.use(e,t)},this.addResponseInterceptor=(e,t)=>{this._axios.interceptors.response.use(e,t)},this.get=async function(t,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json";return e.request({method:"get",url:t,params:a,responseType:s})},this.create=async(e,t)=>await this.request(this.getOptionsConfig("post",e,t)),this.put=async(e,t)=>await this.request(this.getOptionsConfig("put",e,t)),this.update=async(e,t)=>await this.request(this.getOptionsConfig("patch",e,t)),this.delete=async(e,t)=>this.request({method:"delete",url:e,params:t}),this.getOptionsConfig=(e,t,a)=>{let s={"Content-Type":"application/json"};return a instanceof FormData&&(s["Content-Type"]="multipart/form-data"),{method:e,url:t,data:a,headers:s}},this._axios.interceptors.response.use(e=>e,e=>{var t,a,s,r,i,n,o,l;return((null==(t=e.response)?void 0:t.status)===401&&this.logout(),(null==(a=e.response)?void 0:a.status)===400||(null==(s=e.response)?void 0:s.status)===500||(null==(r=e.response)?void 0:r.status)===401)?Promise.resolve(e.response):(((null==(n=e.response)||null==(i=n.data)?void 0:i.message)=="Token is not valid"||(null==(l=e.response)||null==(o=l.data)?void 0:o.message)=="No token, authorization denied")&&this.logout(),Promise.reject(e))})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[54,1911,4816,2471,151,3385,8276,8441,1684,7358],()=>t(38931)),_N_E=e.O()}]);