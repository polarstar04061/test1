(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{16938:(e,t,s)=>{"use strict";s.d(t,{BE:()=>c,Ck:()=>o,VO:()=>i,og:()=>d,r8:()=>l});var a=s(99572),r=s(96446);let n=new a.Q,o=e=>n.create(r.Zs,e),i=e=>n.get(r.F1,e),l=e=>n.get(r.W3,e),c=e=>n.create(r.OQ,e),d=e=>n.update(r.OE,e)},38931:(e,t,s)=>{Promise.resolve().then(s.bind(s,95460))},95460:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(95155),r=s(17652),n=s(12115),o=s(92809),i=s(32214),l=s(51770),c=s(91867),d=s(60902),u=s(71581),h=s(35695),p=s(16938);function v(e){let{show:t,onScan:s,onClose:r}=e,o=(0,h.useRouter)(),v=(0,h.useParams)().locale,[g,A]=(0,n.useState)(null),[m,E]=(0,n.useState)(null),[C,w]=(0,n.useState)("environment");(0,n.useEffect)(()=>{t&&(async()=>{try{var e;if(!(null==(e=navigator.mediaDevices)?void 0:e.getUserMedia))throw Error("Camera API not supported in this browser");let t=await navigator.mediaDevices.getUserMedia({video:{facingMode:C,width:{ideal:1280},height:{ideal:720}}}),s=t.getVideoTracks();if(0===s.length)throw Error("No video track found");t.getTracks().forEach(e=>e.stop()),A(!0)}catch(e){console.error("Camera access error:",e),E(e instanceof Error?e.message:"Failed to access camera"),A(!1)}})()},[t,C]);let f=async e=>{var t,a,n;s(null==(t=e[0])?void 0:t.rawValue);try{let t={qrId:null==(a=e[0])?void 0:a.rawValue};(await (0,p.r8)(t)).success&&o.push("http://localhost:3000/"+v+"/pet?id="+(null==(n=e[0])?void 0:n.rawValue))}catch(e){console.error("QR Scanner Error:",e)}r()};return(0,a.jsxs)(l.A,{show:t,onHide:r,size:"lg",centered:!0,backdrop:"static",children:[(0,a.jsx)(l.A.Header,{closeButton:!0,children:(0,a.jsx)(l.A.Title,{children:"QR-Code scannen"})}),(0,a.jsx)(l.A.Body,{className:"text-center",children:null===g?(0,a.jsxs)("div",{className:"d-flex flex-column align-items-center py-4",children:[(0,a.jsx)(c.A,{animation:"border",variant:"primary"}),(0,a.jsx)("p",{className:"mt-3",children:"Kamera wird initialisiert..."})]}):m?(0,a.jsxs)(i.A,{variant:"danger",children:[(0,a.jsx)(i.A.Heading,{children:"Kamerafehler"}),(0,a.jsx)("p",{children:m}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(d.A,{variant:"primary",size:"sm",onClick:()=>window.location.reload(),children:"Erneut versuchen"})})]}):(0,a.jsx)("div",{style:{position:"relative",paddingTop:"100%",backgroundColor:"#000"},children:(0,a.jsx)(u.Lp,{constraints:{facingMode:C,width:{ideal:1280},height:{ideal:720}},scanDelay:300,onScan:f,onError:e=>{console.error("QR Scanner Error:",e),E(e instanceof Error?e.message:"An unknown error occurred")},styles:{container:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},video:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}})})}),(0,a.jsx)(l.A.Footer,{children:(0,a.jsx)(d.A,{variant:"primary",onClick:r,children:"Schlie\xdfen"})})]})}function g(e){let{params:t}=e;(0,r.c3)("Home");let[l,c]=(0,n.useState)("en");(0,n.useEffect)(()=>{t.then(e=>{c(e.locale)}),navigator.mediaDevices||Promise.resolve().then(s.bind(s,41648)).then(e=>{})},[t]);let[d,u]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null),[g,A]=(0,n.useState)(null);return(0,a.jsxs)(o.A,{className:"py-5 page-container",children:[(0,a.jsx)("h1",{className:"text-center mb-4",children:"QR Code Scanner"}),(0,a.jsx)("div",{className:"text-center mb-4",children:(0,a.jsx)("a",{className:"btn btn-custom",onClick:()=>u(!0),children:"QR-Code scannen"})}),g&&(0,a.jsx)(i.A,{variant:"danger",onClose:()=>A(null),dismissible:!0,children:g}),(0,a.jsx)(v,{show:d,onScan:e=>{p(e),A(null)},onClose:()=>u(!1)})]})}},96446:(e,t,s)=>{"use strict";s.d(t,{F1:()=>r,OE:()=>o,OQ:()=>n,Ou:()=>d,W3:()=>i,Zs:()=>a,aF:()=>p,b6:()=>u,s_:()=>c,wz:()=>l,yZ:()=>h});let a="/api/qrcode/generate-qrcode",r="/api/qrcode/get-qrcode-data",n="/api/qrcode/verify-password",o="/api/qrcode/update-qrcode-data",i="/api/qrcode/get-qrcode-page-token",l="/api/auth/login",c="/api/auth/forgot-password",d="/api/auth/reset-password/",u="/api/auth/logout",h="/api/dashboard/get-user-data-by-page",p="/api/dashboard/reset-qrcode-password"},99572:(e,t,s)=>{"use strict";s.d(t,{Q:()=>l});var a=s(23464),r=s(49509);let n={API_URL:"http://13.49.196.146:5000/",AUTH_BACKEND:"Dummy",FIRE_BASE:{API_KEY:r.env.REACT_APP_APIKEY,AUTH_DOMAIN:r.env.REACT_APP_AUTHDOMAIN,PROJECTID:r.env.REACT_APP_PROJECTID,STORAGEBUCKET:r.env.REACT_APP_STORAGEBUCKET,MESSAGINGSENDERID:r.env.REACT_APP_MESSAGINGSENDERID,APPID:r.env.REACT_APP_APPID}};var o=s(79971);a.A.defaults.baseURL=n.API_URL;let i=n.API_URL;a.A.defaults.headers.post["Content-Type"]="application/json",a.A.interceptors.response.use(function(e){return e.data?e.data:e});class l{request(e){return new Promise((t,s)=>{this._axios.request(e).then(e=>{t(e.data)}).catch(e=>{var t;s((null==(t=e.response)?void 0:t.data)||e.message)})})}constructor(){var e=this;this._axios=a.A.create({baseURL:i,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.logout=()=>{(0,o.setCookie)("auth_token",""),window.location.href="/en/auth/login"},this.addRequestInterceptor=(e,t)=>{this._axios.interceptors.request.use(e,t)},this.addResponseInterceptor=(e,t)=>{this._axios.interceptors.response.use(e,t)},this.get=async function(t,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json";return e.request({method:"get",url:t,params:s,responseType:a})},this.create=async(e,t)=>await this.request(this.getOptionsConfig("post",e,t)),this.put=async(e,t)=>await this.request(this.getOptionsConfig("put",e,t)),this.update=async(e,t)=>await this.request(this.getOptionsConfig("patch",e,t)),this.delete=async(e,t)=>this.request({method:"delete",url:e,params:t}),this.getOptionsConfig=(e,t,s)=>{let a={"Content-Type":"application/json"};return s instanceof FormData&&delete a["Content-Type"],{method:e,url:t,data:s,headers:a}},this._axios.interceptors.response.use(e=>e,e=>{var t,s,a,r,n,o,i,l;return((null==(t=e.response)?void 0:t.status)===401&&this.logout(),(null==(s=e.response)?void 0:s.status)===400||(null==(a=e.response)?void 0:a.status)===500||(null==(r=e.response)?void 0:r.status)===401)?Promise.resolve(e.response):(((null==(o=e.response)||null==(n=o.data)?void 0:n.message)=="Token is not valid"||(null==(l=e.response)||null==(i=l.data)?void 0:i.message)=="No token, authorization denied")&&this.logout(),Promise.reject(e))})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[54,957,764,151,385,276,441,684,358],()=>t(38931)),_N_E=e.O()}]);