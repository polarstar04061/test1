(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{1505:(e,a,t)=>{Promise.resolve().then(t.bind(t,39247))},2294:()=>{},16938:(e,a,t)=>{"use strict";t.d(a,{BE:()=>c,Ck:()=>n,VO:()=>r,og:()=>m,pd:()=>o,r8:()=>d});var l=t(99572),s=t(96446);let i=new l.Q,n=e=>i.create(s.Zs,e),r=e=>i.get(s.F1,e),o=e=>i.get(s.Hv,e),d=e=>i.get(s.W3,e),c=e=>i.create(s.OQ,e),m=e=>i.create(s.OE,e)},29709:(e,a,t)=>{"use strict";t.d(a,{Fk:()=>s,uG:()=>l});let l=()=>localStorage.getItem("user")&&"undefined"!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"").role:null,s=()=>localStorage.getItem("user")&&"undefined"!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"").id:null},39247:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>O});var l=t(95155),s=t(11656),i=t(12115),n=t(69008),r=t(28890),o=t(78173),d=t(63954),c=t(74802),m=t(74588),u=t(41101),h=t(86220),p=t(88574),f=t(14426),g=t(73731),v=t(94862),x=t(24324),j=t(76380),b=t(51770),N=t(50931),y=t(56548),_=t(97612);t(30133);var A=t(29709),S=t(35695),w=t(77335),C=t(39365),k=t.n(C),M=t(91867),D=t(57383),P=t(16938),I=t(81637);function E(e){var a;let{qrId:t,handleSubmitStatus:s}=e,{showSuccess:n,showError:r}=(0,_.i)();(0,S.useParams)().locale;let[o,d]=(0,i.useState)({first_name:"",last_name:"",animal_name:"",animal_species:"",animal_breed:"",animal_birthdate:"",animal_feature:"",street:"",postal_code:"",city:"",phone:"",email:"",social_media:""}),[c,m]=(0,i.useState)(null),[u,h]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!1),[g,v]=(0,i.useState)(!1),[x,j]=(0,i.useState)({}),[b,N]=(0,i.useState)(!1),[y,C]=(0,i.useState)(!1),[E,O]=(0,i.useState)(null),[R,Y]=(0,i.useState)(""),[z,G]=(0,i.useState)(!0),[T,F]=(0,i.useState)(""),[q,U]=(0,i.useState)(""),[J,V]=(0,i.useState)(!1),[W,K]=(0,i.useState)(!1),[H,B]=(0,i.useState)(),[Z,Q]=(0,i.useState)(),[X,L]=(0,i.useState)(null),[$,ee]=(0,i.useState)(null);(0,w.G)(e=>e.auth.isAuthenticated);let ea=(0,i.useRef)(null);(0,S.useRouter)();let[et,el]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=D.A.get("qr_page_token");if(e)try{let a=JSON.parse(e),t=a.expires&&a.expires<Date.now();B("exists"),Q(t?"expired":"valid")}catch(e){B("exists"),Q("unknown")}else B("does not exist"),Q("not applicable");t&&(async()=>{G(!0);try{let e={userId:(0,A.Fk)()},a=await (0,I.VM)(e);a.success&&d({first_name:a.data.first_name||"",last_name:a.data.last_name||"",street:a.data.street||"",postal_code:a.data.postal_code||"",city:a.data.city||"",phone:a.data.phone||"",email:a.data.email||"",social_media:a.data.social_media||""});let l=await (0,P.pd)({qrId:t});l.success&&(d(e=>({...e,animal_name:l.data.animal_name,animal_breed:l.data.animal_breed,animal_species:l.data.animal_species,animal_birthdate:l.data.animal_birthdate,animal_feature:l.data.animal_feature,first_name:l.data.first_name||"",last_name:l.data.last_name||"",street:l.data.street||"",postal_code:l.data.postal_code||"",city:l.data.city||"",phone:l.data.phone||"",email:l.data.email||"",social_media:l.data.social_media||""})),ee(l.data.animal_image_url))}catch(e){r(e.message),d({first_name:"",last_name:"",animal_name:"",animal_species:"",animal_breed:"",animal_birthdate:"",animal_feature:"",street:"",postal_code:"",city:"",phone:"",email:"",social_media:""})}finally{G(!1)}})()},[t]),(0,i.useEffect)(()=>()=>{$&&URL.revokeObjectURL($)},[$]);let es=()=>{var e;null==(e=ea.current)||e.click()},ei=e=>{let{name:a,value:t,type:l}=e.target;d(e=>({...e,[a]:t}))},en=()=>{let e={};return((null==o?void 0:o.first_name)||"").trim()||(e.first_name="Vorname ist erforderlich"),((null==o?void 0:o.last_name)||"").trim()||(e.last_name="Nachname ist erforderlich"),((null==o?void 0:o.animal_name)||"").trim()||(e.animal_name="Tier Name ist erforderlich"),(null==o?void 0:o.email)||(e.email="E-Mail-Adresse erforderlich"),j(e),0===Object.keys(e).length},er=async e=>{if(e.preventDefault(),en()){N(!0);try{let e,a=new FormData;a.append("qrId",null!=t?t:""),a.append("userId",(0,A.Fk)()),a.append("first_name",(null==o?void 0:o.first_name)||""),a.append("last_name",(null==o?void 0:o.last_name)||""),a.append("animal_name",(null==o?void 0:o.animal_name)||""),a.append("animal_species",(null==o?void 0:o.animal_species)||""),a.append("animal_breed",(null==o?void 0:o.animal_breed)||""),a.append("animal_birthdate",(null==o?void 0:o.animal_birthdate)||""),a.append("animal_feature",(null==o?void 0:o.animal_feature)||""),a.append("street",(null==o?void 0:o.street)||""),a.append("postal_code",(null==o?void 0:o.postal_code)||""),a.append("city",(null==o?void 0:o.city)||""),a.append("phone",(null==o?void 0:o.phone)||""),a.append("email",(null==o?void 0:o.email)||""),a.append("social_media",(null==o?void 0:o.social_media)||""),X&&a.append("logo",X,X.name),t?(e=await (0,P.og)(a)).success?(n(e.message),C(!0)):r(e.message):(e=await (0,P.Ck)(a)).success?(C(!0),h(!0),O(e.qrCodeData),Y(e.downloadUrl),n(e.message),U(e.password)):r(e.message)}catch(e){var a;console.error("Submission error:",(null==(a=e.response)?void 0:a.data)||e.message),r(e.message||"QR-Code konnte nicht generiert werden")}finally{N(!1),s()}}};return(0,l.jsx)("div",{className:"",children:(0,l.jsx)("div",{className:"",children:z&&t?(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsx)(M.A,{})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsxs)("div",{className:"text-center w-100",style:{maxWidth:300},children:[(()=>{var e,a;let t=null!=(e=null==et?void 0:et.w)?e:200,s=null!=(a=null==et?void 0:et.h)?a:200,i=Math.min(300/t,220/s,1),n=Math.round(t*i),r=Math.round(s*i);return(0,l.jsx)("div",{role:"button","aria-label":"Bild ausw\xe4hlen",className:"border rounded d-flex justify-content-center align-items-center mx-auto",style:{width:n,height:r,cursor:"pointer",background:"#fafafa"},onClick:es,children:(0,l.jsx)("img",{src:$||"data:image/png;base64,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",alt:"Logo preview",onLoad:e=>el({w:e.currentTarget.naturalWidth,h:e.currentTarget.naturalHeight}),style:{width:"100%",height:"100%",objectFit:"contain"}})})})(),(0,l.jsx)("input",{ref:ea,type:"file",accept:"image/*",className:"d-none",onChange:e=>{var a;let t=(null==(a=e.target.files)?void 0:a[0])||null;L(t),t?ee(URL.createObjectURL(t)):ee(null),el(null)}})]})})}),(0,l.jsxs)("form",{onSubmit:er,children:[(0,l.jsxs)("div",{className:"row mt-md-4 mt-4",children:[(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"first_name",className:"form-label",children:"Vorname*"}),(0,l.jsx)("input",{type:"text",className:"form-control ".concat(x.first_name?"is-invalid":""),id:"first_name",name:"first_name",value:o.first_name,onChange:ei}),x.first_name&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.first_name})]}),(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"last_name",className:"form-label",children:"Nachname*"}),(0,l.jsx)("input",{type:"text",className:"form-control ".concat(x.last_name?"is-invalid":""),id:"last_name",name:"last_name",value:o.last_name,onChange:ei}),x.last_name&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.last_name})]})]}),(0,l.jsxs)("div",{className:"row mt-md-4 mt-2",children:[(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"animal_name",className:"form-label",children:"Tiername*"}),(0,l.jsx)("input",{type:"text",className:"form-control ".concat(x.animal_name?"is-invalid":""),id:"animal_name",name:"animal_name",value:null!=(a=o.animal_name)?a:"",onChange:ei}),x.animal_name&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.animal_name})]}),(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"animal_species",className:"form-label",children:"Tierarten"}),(0,l.jsx)("input",{type:"text",className:"form-control ".concat(x.animal_species?"is-invalid":""),id:"animal_species",name:"animal_species",value:o.animal_species,onChange:ei}),x.animal_species&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.animal_species})]})]}),(0,l.jsxs)("div",{className:"row mt-md-4 mt-2",children:[(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"animal_breed",className:"form-label",children:"Tierrasse"}),(0,l.jsx)("input",{type:"text",className:"form-control ".concat(x.animal_breed?"is-invalid":""),id:"animal_breed",name:"animal_breed",value:o.animal_breed,onChange:ei}),x.animal_breed&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.animal_breed})]}),(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"animal_birthdate",className:"form-label",children:"Geburtsdatum des Tieres"}),(0,l.jsx)("input",{type:"text",className:"form-control ".concat(x.animal_birthdate?"is-invalid":""),id:"animal_birthdate",name:"animal_birthdate",value:o.animal_birthdate,onChange:ei}),x.animal_birthdate&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.animal_birthdate})]})]}),(0,l.jsxs)("div",{className:"my-3",children:[(0,l.jsx)("label",{htmlFor:"description",className:"form-label",children:"Beschreibung"}),(0,l.jsx)("textarea",{className:"form-control",id:"animal_feature",name:"animal_feature",rows:3,value:o.animal_feature,onChange:ei})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"form-label",children:"Kontaktm\xf6glichkeiten"}),(0,l.jsxs)("div",{className:"row mt-md-4 mt-2",children:[(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"street",className:"form-label",children:"Stra\xdfennummer"}),(0,l.jsx)("input",{type:"text",className:"form-control ".concat(x.street?"is-invalid":""),id:"street",name:"street",value:o.street,onChange:ei}),x.street&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.street})]}),(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"postal_code",className:"form-label",children:"Postleitzahl"}),(0,l.jsx)("input",{type:"text",className:"form-control ".concat(x.postal_code?"is-invalid":""),id:"postal_code",name:"postal_code",value:o.postal_code,onChange:ei}),x.postal_code&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.postal_code})]})]}),(0,l.jsxs)("div",{className:"row mt-md-4 mt-2",children:[(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"city",className:"form-label",children:"Stadt"}),(0,l.jsx)("input",{type:"text",className:"form-control ".concat(x.city?"is-invalid":""),id:"city",name:"city",value:o.city,onChange:ei}),x.city&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.city})]}),(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"phone",className:"form-label",children:"Phone"}),(0,l.jsx)(k(),{country:"de",value:o.phone,onChange:e=>d(a=>({...a,phone:e})),inputClass:" ".concat(x.phone?"is-invalid":""),containerClass:x.phone?"is-invalid":"",inputStyle:{width:"100%",height:"38px"}}),x.phone&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.phone})]})]}),(0,l.jsxs)("div",{className:"row mt-md-4 mt-2",children:[(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"email",className:"form-label",children:"E-Mail**"}),(0,l.jsx)("input",{type:"text",className:"form-control ".concat(x.email?"is-invalid":""),id:"email",name:"email",value:o.email,onChange:ei}),x.email&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.email})]}),(0,l.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,l.jsx)("label",{htmlFor:"social_media",className:"form-label",children:"Soziale Medien"}),(0,l.jsx)("input",{type:"text",className:"form-control ".concat(x.social_media?"is-invalid":""),id:"social_media",name:"social_media",value:o.social_media,onChange:ei}),x.social_media&&(0,l.jsx)("div",{className:"invalid-feedback",children:x.social_media})]})]})]}),(0,l.jsx)("div",{className:"d-flex justify-content-center mt-5 gap-3",children:(0,l.jsx)("button",{type:"submit",className:"btn btn-primary border-r-50",disabled:b,children:b?(0,l.jsxs)(l.Fragment,{children:["Aktivieren...",b&&(0,l.jsx)(M.A,{animation:"border",size:"sm",className:"ms-2"})]}):"Aktivieren"})})]})]})})})}t(2294);let O=(0,N.r)(function(){let{showSuccess:e,showError:a}=(0,_.i)(),[t,N]=(0,i.useState)([]),[S,w]=(0,i.useState)(!0),[C,k]=(0,i.useState)({page:0,pageSize:10}),[M,D]=(0,i.useState)(0),[P,I]=(0,i.useState)([]),[O,R]=(0,i.useState)({items:[]}),[Y,z]=(0,i.useState)(null),[G,T]=(0,i.useState)(null),[F,q]=(0,i.useState)(""),[U,J]=(0,i.useState)(""),[V,W]=(0,i.useState)(),[K,H]=(0,i.useState)({name:"",userId:"",description:"",category:"",contactOptions:{phone:!1,email:!1,push:!1},phoneNumber:"",email:""}),[B,Z]=(0,i.useState)(!1),[Q,X]=(0,i.useState)(!1),[L,$]=(0,i.useState)({}),[ee,ea]=(0,i.useState)(new Date),[et,el]=(0,i.useState)(!1),[es,ei]=(0,i.useState)(),[en,er]=(0,i.useState)(null),[eo,ed]=(0,i.useState)(""),[ec,em]=(0,i.useState)(!0),[eu,eh]=(0,i.useState)(!1),[ep,ef]=(0,i.useState)(!1),[eg,ev]=(0,i.useState)(),[ex,ej]=(0,i.useState)(0),[eb,eN]=(0,i.useState)(0),[ey,e_]=(0,i.useState)(0),[eA,eS]=(0,i.useState)(!1),ew=(0,A.Fk)(),eC=e=>"+"+e;(0,i.useEffect)(()=>{(async()=>{w(!0),ef(!0);try{var e,t;let l=C.page*C.pageSize,s=l+C.pageSize,i={userId:ew,startIndex:l,endIndex:s,field:(null==(e=P[0])?void 0:e.field)||"createdAt",sort:(null==(t=P[0])?void 0:t.sort)||"desc",searchText:F||""},n=await (0,y.kg)(i);if(n.success){let e=n.userData;N(e),D(n.total),eS(!0)}else a(n.message);ef(!1)}catch(e){console.error("Error loading mock data:",e),a(e.message||"Backend-Fehler!")}finally{w(!1),ef(!1)}})()},[C,P,F,eg,es]);let ek=[{field:"qrId",headerName:"QRCode ID",flex:3,type:"string"},{field:"password",headerName:"Passwort",flex:2,type:"string"},{field:"status",headerName:"Aktiver Status",flex:1,type:"string",headerAlign:"center",align:"center",renderCell:e=>1===Number(e.value)?(0,l.jsx)(c.A,{color:"success"}):(0,l.jsx)(m.A,{color:"error"})},{field:"first_name",headerName:"Vorname",flex:2,renderCell:e=>{var a;let t=null==(a=e.row.profile)?void 0:a.first_name;return(0,l.jsx)("div",{style:{color:t?"inherit":"#999",fontStyle:t?"normal":"italic"},children:t||""})}},{field:"last_name",headerName:"Nachname",flex:2,type:"string",renderCell:e=>{var a;let t=null==(a=e.row.profile)?void 0:a.last_name;return(0,l.jsx)("div",{style:{color:t?"inherit":"#999",fontStyle:t?"normal":"italic"},children:t||""})}},{field:"animal_name",headerName:"Tiername",flex:2,type:"string"},{field:"animal_species",headerName:"Tierarten",flex:2,type:"string"},{field:"animal_breed",headerName:"Tierrasse",flex:2,type:"string"},{field:"animal_birthdate",headerName:"Tier Datum",flex:2,type:"string"},{field:"animal_feature",headerName:"Tier-Feature",flex:2,type:"string"},{field:"street",headerName:"Stra\xdfe",flex:2,type:"string",renderCell:e=>{var a;let t=null==(a=e.row.profile)?void 0:a.street;return(0,l.jsx)("div",{style:{color:t?"inherit":"#999",fontStyle:t?"normal":"italic"},children:t||""})}},{field:"postal_code",headerName:"Postleitzahl",flex:2,type:"string",renderCell:e=>{var a;let t=null==(a=e.row.profile)?void 0:a.postal_code;return(0,l.jsx)("div",{style:{color:t?"inherit":"#999",fontStyle:t?"normal":"italic"},children:t||""})}},{field:"city",headerName:"Stadt",flex:2,type:"string",renderCell:e=>{var a;let t=null==(a=e.row.profile)?void 0:a.city;return(0,l.jsx)("div",{style:{color:t?"inherit":"#999",fontStyle:t?"normal":"italic"},children:t||""})}},{field:"email",headerName:"E-Mail",flex:2,type:"string",renderCell:e=>{var a;let t=null==(a=e.row.profile)?void 0:a.email;return(0,l.jsx)("div",{style:{color:t?"inherit":"#999",fontStyle:t?"normal":"italic"},children:t||""})}},{field:"social_media",headerName:"Soziale Medien",flex:2,type:"string",renderCell:e=>{var a;let t=null==(a=e.row.profile)?void 0:a.social_media;return(0,l.jsx)("div",{style:{color:t?"inherit":"#999",fontStyle:t?"normal":"italic"},children:t||""})}},{field:"phoneNumber",headerName:"Telefon",flex:1,type:"string",renderCell:e=>{var a;let t=null==(a=e.row.profile)?void 0:a.phone;return t?(0,l.jsx)(u.A,{label:eC(t),variant:"outlined",color:"primary",size:"small"}):null}},{field:"actions",type:"actions",headerName:"Aktionen",width:80,minWidth:80,maxWidth:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:e=>[(0,l.jsx)(h.A,{"aria-label":"more","aria-controls":"actions-menu-".concat(e.id),"aria-haspopup":"true",onClick:a=>eP(a,e.id),children:(0,l.jsx)(n.A,{})},"actions-".concat(e.id))]}],eM=(0,i.useMemo)(()=>ek.map(e=>{var a;return{...e,minWidth:null!=(a=e.minWidth)?a:160,flex:void 0}}),[]),eD=(0,i.useMemo)(()=>eA?(0,l.jsx)("div",{style:{width:"100%",overflowX:"auto"},children:(0,l.jsx)(s.z,{rows:t,columns:eM,loading:S,rowCount:M,paginationMode:"server",sortingMode:"server",filterMode:"server",paginationModel:C,onPaginationModelChange:k,sortModel:P,onSortModelChange:I,filterModel:O,onFilterModelChange:R,pageSizeOptions:[5,10,25],localeText:{paginationRowsPerPage:"Zeilen pro Seite:"},disableRowSelectionOnClick:!0,sx:{'& .MuiDataGrid-columnHeader[data-field="actions"]':{position:"sticky",right:0,zIndex:3,backgroundColor:e=>e.palette.background.paper},'& .MuiDataGrid-cell[data-field="actions"]':{position:"sticky",right:0,zIndex:2,backgroundColor:e=>e.palette.background.paper},"& .MuiDataGrid-virtualScroller":{overflowX:"visible"}}})}):null,[eA,t,eM,S,M,C,P,O]),eP=(e,a)=>{z(e.currentTarget),T(a)},eI=()=>{z(null),T(null)},eE=async e=>{eI(),X(!0),J(e);try{let a=await (0,y.sU)({qrId:e});ev(a.newQRPassword)}catch(e){console.log(e.message),a(e.message)}},eO=async e=>{try{Z(!0),J(e),eI()}catch(e){a(e.message),H({name:"",userId:"",description:"",category:"",contactOptions:{phone:!1,email:!1,push:!1},phoneNumber:"",email:""})}finally{em(!1)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:ep,children:(0,l.jsx)(f.A,{color:"inherit"})}),(0,l.jsxs)("div",{style:{height:"100%",width:"100%"},className:"page-container container",children:[(0,l.jsx)(g.A,{fullWidth:!0,variant:"outlined",placeholder:"Name suchen...",value:F,onChange:e=>q(e.target.value),InputProps:{startAdornment:(0,l.jsx)(v.A,{position:"start",children:(0,l.jsx)(d.A,{})})},sx:{mb:2}}),(0,l.jsx)("div",{style:{width:"100%",overflowX:"auto"},children:eD}),(0,l.jsxs)(x.A,{id:"actions-menu",anchorEl:Y,open:!!Y,onClose:eI,MenuListProps:{"aria-labelledby":"actions-menu"},children:[(0,l.jsxs)(j.A,{onClick:()=>G&&eO(G),children:[(0,l.jsx)(r.A,{fontSize:"small",sx:{mr:1}})," Bearbeiten"]}),(0,l.jsxs)(j.A,{onClick:()=>G&&eE(G),children:[(0,l.jsx)(o.A,{fontSize:"small",sx:{mr:1}})," Passwort zur\xfccksetzen"]})]})]}),(0,l.jsx)(b.A,{show:B,onHide:()=>Z(!1),contentClassName:"qrcode-edit-form-border-none",className:"qrcode-edit-form",centered:!0,children:(0,l.jsx)(E,{qrId:U,handleSubmitStatus:()=>{ei(new Date)}})}),(0,l.jsxs)(b.A,{show:Q,onHide:()=>X(!1),centered:!0,children:[(0,l.jsx)(b.A.Header,{closeButton:!0,children:(0,l.jsx)(b.A.Title,{children:"Passwort zur\xfccksetzen"})}),(0,l.jsx)(b.A.Body,{children:(0,l.jsx)("form",{children:(0,l.jsx)("div",{className:"row my-md-4 my-2",children:(0,l.jsxs)("div",{className:"col-md-12",children:[(0,l.jsx)("span",{className:"me-4",children:"Neues Passwort:"}),(0,l.jsx)("span",{children:eg})]})})})})]})]})})},50931:(e,a,t)=>{"use strict";t.d(a,{r:()=>n});var l=t(95155),s=t(35695),i=t(77335);function n(e){return function(a){(0,s.useRouter)();let t=(0,i.G)(e=>e.auth.isAuthenticated);return t?(0,l.jsx)(e,{...a}):null}}},56548:(e,a,t)=>{"use strict";t.d(a,{c3:()=>o,gH:()=>d,kg:()=>n,sU:()=>r});var l=t(99572),s=t(96446);let i=new l.Q,n=e=>i.get(s.yZ,e),r=e=>i.update(s.aF,e),o=e=>i.update(s.ND,e),d=()=>i.get(s.pY)},61042:(e,a,t)=>{"use strict";t.d(a,{SnackbarProvider:()=>o,d:()=>d});var l=t(95155),s=t(12115),i=t(75824),n=t(9665);let r=(0,s.createContext)(null),o=e=>{let{children:a}=e,[t,o]=(0,s.useState)({open:!1,message:"",severity:"info"}),d=()=>o({...t,open:!1});return(0,l.jsxs)(r.Provider,{value:(e,a)=>{o({open:!0,message:e,severity:a})},children:[a,(0,l.jsx)(i.A,{open:t.open,autoHideDuration:3e3,onClose:d,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{top:"80px !important"},children:(0,l.jsx)(n.A,{onClose:d,severity:t.severity,sx:{width:"100%"},children:t.message})})]})},d=()=>(0,s.useContext)(r)},77335:(e,a,t)=>{"use strict";t.d(a,{G:()=>i,j:()=>s});var l=t(34540);let s=()=>(0,l.wA)(),i=l.d4},81637:(e,a,t)=>{"use strict";t.d(a,{VM:()=>n,Vz:()=>r});var l=t(99572),s=t(96446);let i=new l.Q,n=e=>i.get(s.p6,e),r=e=>i.create(s.rk,e)},96446:(e,a,t)=>{"use strict";t.d(a,{F1:()=>s,GZ:()=>p,Hv:()=>i,ND:()=>j,OE:()=>r,OQ:()=>n,Ou:()=>u,W3:()=>o,Zs:()=>l,aF:()=>x,aV:()=>f,b6:()=>h,fo:()=>g,oi:()=>d,p6:()=>N,pY:()=>b,rk:()=>y,s_:()=>m,wz:()=>c,yZ:()=>v});let l="/api/qrcode/generate-qrcode",s="/api/qrcode/get-qrcode-data",i="/api/qrcode/get-qrcode-data-by-admin",n="/api/qrcode/verify-password",r="/api/qrcode/update-qrcode-data",o="/api/qrcode/get-qrcode-page-token",d="/api/auth/register",c="/api/auth/login",m="/api/auth/forgot-password",u="/api/auth/reset-password/",h="/api/auth/logout",p="/api/auth/verify-2fa-login",f="/api/auth/resend-2fa-code",g="/api/auth/verify-email",v="/api/dashboard/get-user-data-by-page",x="/api/dashboard/reset-qrcode-password",j="/api/dashboard/generate-qrcodes-by-count",b="/api/dashboard/get-all-qrcode-urls",N="/api/profile/get-user-profile-data",y="/api/profile/create-user-profile-data"},97612:(e,a,t)=>{"use strict";t.d(a,{i:()=>s});var l=t(61042);let s=()=>{let e=(0,l.d)();return{showSuccess:a=>e(a,"success"),showError:a=>e(a,"error"),showWarning:a=>e(a,"warning"),showInfo:a=>e(a,"info")}}},99572:(e,a,t)=>{"use strict";t.d(a,{Q:()=>o});var l=t(23464),s=t(49509);let i={API_URL:"https://deinetierfamilie.com/",AUTH_BACKEND:"Dummy",FIRE_BASE:{API_KEY:s.env.REACT_APP_APIKEY,AUTH_DOMAIN:s.env.REACT_APP_AUTHDOMAIN,PROJECTID:s.env.REACT_APP_PROJECTID,STORAGEBUCKET:s.env.REACT_APP_STORAGEBUCKET,MESSAGINGSENDERID:s.env.REACT_APP_MESSAGINGSENDERID,APPID:s.env.REACT_APP_APPID}};var n=t(79971);l.A.defaults.baseURL=i.API_URL;let r=i.API_URL;l.A.defaults.headers.post["Content-Type"]="application/json",l.A.interceptors.response.use(function(e){return e.data?e.data:e});class o{request(e){return new Promise((a,t)=>{this._axios.request(e).then(e=>{a(e.data)}).catch(e=>{var a;t((null==(a=e.response)?void 0:a.data)||e.message)})})}constructor(){var e=this;this._axios=l.A.create({baseURL:r,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.logout=()=>{(0,n.setCookie)("auth_token",""),window.location.href="/de/auth/login"},this.addRequestInterceptor=(e,a)=>{this._axios.interceptors.request.use(e,a)},this.addResponseInterceptor=(e,a)=>{this._axios.interceptors.response.use(e,a)},this.get=async function(a,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json";return e.request({method:"get",url:a,params:t,responseType:l})},this.create=async(e,a)=>await this.request(this.getOptionsConfig("post",e,a)),this.put=async(e,a)=>await this.request(this.getOptionsConfig("put",e,a)),this.update=async(e,a)=>await this.request(this.getOptionsConfig("patch",e,a)),this.delete=async(e,a)=>this.request({method:"delete",url:e,params:a}),this.getOptionsConfig=(e,a,t)=>{let l={"Content-Type":"application/json"};return t instanceof FormData&&(l["Content-Type"]="multipart/form-data"),{method:e,url:a,data:t,headers:l}},this._axios.interceptors.response.use(e=>e,e=>{var a,t,l,s,i,n,r,o;return((null==(a=e.response)?void 0:a.status)===401&&this.logout(),(null==(t=e.response)?void 0:t.status)===400||(null==(l=e.response)?void 0:l.status)===500||(null==(s=e.response)?void 0:s.status)===401)?Promise.resolve(e.response):(((null==(n=e.response)||null==(i=n.data)?void 0:i.message)=="Token is not valid"||(null==(o=e.response)||null==(r=o.data)?void 0:r.message)=="No token, authorization denied")&&this.logout(),Promise.reject(e))})}}}},e=>{var a=a=>e(e.s=a);e.O(0,[7540,2431,54,1911,9110,4540,151,3875,2294,2824,8441,1684,7358],()=>a(1505)),_N_E=e.O()}]);