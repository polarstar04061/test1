(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{16938:(e,t,s)=>{"use strict";s.d(t,{BE:()=>c,Ck:()=>r,VO:()=>o,og:()=>d,r8:()=>l});var a=s(99572),n=s(96446);let i=new a.Q,r=e=>i.create(n.Zs,e),o=e=>i.get(n.F1,e),l=e=>i.get(n.W3,e),c=e=>i.create(n.OQ,e),d=e=>i.update(n.OE,e)},17181:(e,t,s)=>{Promise.resolve().then(s.bind(s,92247))},50931:(e,t,s)=>{"use strict";s.d(t,{r:()=>r});var a=s(95155),n=s(35695),i=s(77335);function r(e){return function(t){(0,n.useRouter)();let s=(0,i.G)(e=>e.auth.isAuthenticated);return s?(0,a.jsx)(e,{...t}):null}}},61042:(e,t,s)=>{"use strict";s.d(t,{SnackbarProvider:()=>l,d:()=>c});var a=s(95155),n=s(12115),i=s(75824),r=s(9665);let o=(0,n.createContext)(null),l=e=>{let{children:t}=e,[s,l]=(0,n.useState)({open:!1,message:"",severity:"info"}),c=()=>l({...s,open:!1});return(0,a.jsxs)(o.Provider,{value:(e,t)=>{l({open:!0,message:e,severity:t})},children:[t,(0,a.jsx)(i.A,{open:s.open,autoHideDuration:3e3,onClose:c,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{top:"80px !important"},children:(0,a.jsx)(r.A,{onClose:c,severity:s.severity,sx:{width:"100%"},children:s.message})})]})},c=()=>(0,n.useContext)(o)},77335:(e,t,s)=>{"use strict";s.d(t,{G:()=>i,j:()=>n});var a=s(34540);let n=()=>(0,a.wA)(),i=a.d4},92247:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var a=s(95155),n=s(11656),i=s(12115),r=s(69008),o=s(28890),l=s(78173),c=s(63954),d=s(41101),u=s(86220),h=s(73731),m=s(94862),p=s(87128),g=s(76380),x=s(51770),v=s(50931),f=s(99572),j=s(96446);let b=new f.Q,N=e=>b.get(j.yZ,e),y=e=>b.update(j.aF,e);var A=s(97612),C=s(16938),k=s(39365),S=s.n(k);s(30133);let O=(0,v.r)(function(){let{showSuccess:e,showError:t}=(0,A.i)(),[s,v]=(0,i.useState)([]),[f,j]=(0,i.useState)(!0),[b,k]=(0,i.useState)({page:0,pageSize:10}),[O,I]=(0,i.useState)(0),[w,E]=(0,i.useState)([]),[P,_]=(0,i.useState)({items:[]}),[T,R]=(0,i.useState)(null),[q,z]=(0,i.useState)(null),[D,M]=(0,i.useState)(""),[B,F]=(0,i.useState)(""),[K,U]=(0,i.useState)({name:"",userId:"",description:"",category:"",contactOptions:{phone:!1,email:!1,push:!1},phoneNumber:"",email:""}),[H,G]=(0,i.useState)(null),[Q,L]=(0,i.useState)(!1),[W,Z]=(0,i.useState)(!1),[J,V]=(0,i.useState)({}),[Y,X]=(0,i.useState)(!1),[$,ee]=(0,i.useState)(!1),[et,es]=(0,i.useState)(),[ea,en]=(0,i.useState)(null),[ei,er]=(0,i.useState)(""),[eo,el]=(0,i.useState)(!0),[ec,ed]=(0,i.useState)(!1),[eu,eh]=(0,i.useState)(),em=e=>"+"+e;(0,i.useEffect)(()=>{(async()=>{j(!0);try{var e,s;let a=b.page*b.pageSize,n=a+b.pageSize,i={startIndex:a,endIndex:n,field:(null==(e=w[0])?void 0:e.field)||"createdAt",sort:(null==(s=w[0])?void 0:s.sort)||"desc",searchText:D||""},r=await N(i);if(r.success){let e=r.userData;v(e),I(r.total)}else t(r.message)}catch(e){console.error("Error loading mock data:",e),t(e.message||"Backend-Fehler!")}finally{j(!1)}})()},[b,w,O,D,et]);let ep=(e,t)=>{R(e.currentTarget),z(t)},eg=()=>{R(null),z(null)},ex=async e=>{eg(),Z(!0),F(e);try{let t=await y({qrId:e});eh(t.newQRPassword)}catch(e){console.log(e.message),t(e.message)}},ev=async e=>{try{L(!0),F(e),eg();let t=await (0,C.VO)({qrId:e});if(t.success){var s,a,n;U({name:t.data.name||"",userId:t.data.userId||"",description:t.data.description||"",category:t.data.category||"",contactOptions:{phone:(null==(s=t.data.contactOptions)?void 0:s.phone)||!1,email:(null==(a=t.data.contactOptions)?void 0:a.email)||!1,push:(null==(n=t.data.contactOptions)?void 0:n.push)||!1},phoneNumber:t.data.phoneNumber||"",email:t.data.email||""})}}catch(e){t(e.message),U({name:"",userId:"",description:"",category:"",contactOptions:{phone:!1,email:!1,push:!1},phoneNumber:"",email:""})}finally{el(!1)}},ef=()=>{let e={};return K.name.trim()||(e.name="Name ist erforderlich"),K.userId.trim()||(e.userId="Benutzername ist erforderlich"),K.category||(e.category="Kategorie ist erforderlich"),K.contactOptions.phone||K.contactOptions.email||K.contactOptions.push||(e.contactOptions="Mindestens eine Kontaktm\xf6glichkeit ist erforderlich"),K.contactOptions.phone&&!K.phoneNumber.trim()&&(e.phoneNumber="Telefonnummer ist erforderlich"),K.contactOptions.email&&!K.email.trim()&&(e.email="E-Mail-Adresse erforderlich"),V(e),0===Object.keys(e).length},ej=async s=>{if(s.preventDefault(),ef()){X(!0);try{let s,a={qrId:B,name:K.name,userId:K.userId,description:K.description,category:K.category,contactOptions:K.contactOptions,phoneNumber:K.phoneNumber,email:K.email};if((s=await (0,C.og)(a)).success){ee(!0),e(s.message);let t=new Date;es(t)}else t(s.message)}catch(e){var a;console.error("Submission error:",(null==(a=e.response)?void 0:a.data)||e.message),t(e.message||"Aktualisierung des QR-Codes fehlgeschlagen")}finally{X(!1)}}},eb=e=>{let{name:t,value:s,type:a}=e.target,n=e.target.checked;"checkbox"===a?U(e=>({...e,contactOptions:{...e.contactOptions,[t]:n}})):U(e=>({...e,[t]:s}))},eN=[{field:"name",headerName:"Name",flex:1,type:"string"},{field:"userId",headerName:"Benutzer-ID",flex:1,type:"string"},{field:"description",headerName:"Beschreibung",flex:2,type:"string"},{field:"email",headerName:"E-Mail",flex:2,type:"string"},{field:"phoneNumber",headerName:"Telefon",flex:1,type:"string",renderCell:e=>(0,a.jsx)(d.A,{label:em(e.value),variant:"outlined",color:"primary",size:"small"})},{field:"actions",type:"actions",headerName:"Ma\xdfnahmen",flex:1,getActions:e=>[(0,a.jsx)(u.A,{"aria-label":"more","aria-controls":"actions-menu-".concat(e.id),"aria-haspopup":"true",onClick:t=>ep(t,e.id),children:(0,a.jsx)(r.A,{})},"actions-".concat(e.id))]}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{height:"100%",width:"100%"},className:"page-container container",children:[(0,a.jsx)(h.A,{fullWidth:!0,variant:"outlined",placeholder:"Name suchen...",value:D,onChange:e=>M(e.target.value),InputProps:{startAdornment:(0,a.jsx)(m.A,{position:"start",children:(0,a.jsx)(c.A,{})})},sx:{mb:2}}),(0,a.jsx)(n.z,{rows:s,columns:eN,loading:f,rowCount:O,paginationMode:"server",sortingMode:"server",filterMode:"server",paginationModel:b,onPaginationModelChange:k,sortModel:w,onSortModelChange:E,filterModel:P,onFilterModelChange:_,pageSizeOptions:[5,10,25],disableRowSelectionOnClick:!0}),(0,a.jsxs)(p.A,{id:"actions-menu",anchorEl:T,open:!!T,onClose:eg,MenuListProps:{"aria-labelledby":"actions-menu"},children:[(0,a.jsxs)(g.A,{onClick:()=>q&&ev(q),children:[(0,a.jsx)(o.A,{fontSize:"small",sx:{mr:1}})," Bearbeiten"]}),(0,a.jsxs)(g.A,{onClick:()=>q&&ex(q),children:[(0,a.jsx)(l.A,{fontSize:"small",sx:{mr:1}})," Passwort zur\xfccksetzen"]})]})]}),(0,a.jsxs)(x.A,{show:Q,onHide:()=>L(!1),centered:!0,children:[(0,a.jsx)(x.A.Header,{closeButton:!0,children:(0,a.jsx)(x.A.Title,{children:"Informationen bearbeiten"})}),(0,a.jsx)(x.A.Body,{children:(0,a.jsxs)("form",{onSubmit:ej,children:[(0,a.jsxs)("div",{className:"row mt-md-4 mt-2",children:[(0,a.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,a.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name*"}),(0,a.jsx)("input",{type:"text",className:"form-control ".concat(J.name?"is-invalid":""),id:"name",name:"name",value:K.name,onChange:eb,disabled:!0}),J.name&&(0,a.jsx)("div",{className:"invalid-feedback",children:J.name})]}),(0,a.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,a.jsx)("label",{htmlFor:"userId",className:"form-label",children:"Benutzer-ID*"}),(0,a.jsx)("input",{type:"text",className:"form-control ".concat(J.userId?"is-invalid":""),id:"userId",name:"userId",value:K.userId,onChange:eb,disabled:!0}),J.userId&&(0,a.jsx)("div",{className:"invalid-feedback",children:J.userId})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{htmlFor:"category",className:"form-label",children:"Kategorie*"}),(0,a.jsxs)("select",{className:"form-select ".concat(J.category?"is-invalid":""),id:"category",name:"category",value:K.category,onChange:eb,children:[(0,a.jsx)("option",{value:"",children:"W\xe4hlen Sie eine Option aus"}),(0,a.jsx)("option",{value:"dog",children:"Hund"}),(0,a.jsx)("option",{value:"cat",children:"Katze"})]}),J.category&&(0,a.jsx)("div",{className:"invalid-feedback",children:J.category})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{htmlFor:"description",className:"form-label",children:"Beschreibung"}),(0,a.jsx)("textarea",{className:"form-control",id:"description",name:"description",rows:1,value:K.description,onChange:eb})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Kontaktm\xf6glichkeiten*"}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"phoneCheck",name:"phone",checked:K.contactOptions.phone,onChange:eb}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"phoneCheck",children:"Telefon"})]}),K.contactOptions.phone&&(0,a.jsxs)("div",{className:"mt-2 ms-4",children:[(0,a.jsx)(S(),{country:"us",value:K.phoneNumber,onChange:e=>U(t=>({...t,phoneNumber:e})),inputClass:" ".concat(J.phoneNumber?"is-invalid":""),containerClass:J.phoneNumber?"is-invalid":"",inputStyle:{width:"100%",height:"38px"}}),J.phoneNumber&&(0,a.jsx)("div",{className:"invalid-feedback",children:J.phoneNumber})]}),(0,a.jsxs)("div",{className:"form-check mt-2",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"emailCheck",name:"email",checked:K.contactOptions.email,onChange:eb}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"emailCheck",children:"E-Mail"})]}),K.contactOptions.email&&(0,a.jsxs)("div",{className:"mt-2 ms-4",children:[(0,a.jsx)("input",{type:"email",className:"form-control ".concat(J.email?"is-invalid":""),id:"email",name:"email",placeholder:"Email address",value:K.email,onChange:eb}),J.email&&(0,a.jsx)("div",{className:"invalid-feedback",children:J.email})]}),(0,a.jsxs)("div",{className:"form-check mt-2",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"pushCheck",name:"push",checked:K.contactOptions.push,onChange:eb}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"pushCheck",children:"Push-Benachrichtigungen"})]})]}),J.contactOptions&&(0,a.jsx)("div",{className:"text-danger mb-2",style:{fontSize:"0.875em"},children:J.contactOptions}),(0,a.jsx)("div",{className:"d-flex justify-content-center mt-5 gap-3",children:(0,a.jsx)("button",{type:"submit",className:"btn btn-primary border-r-50",disabled:Y,children:Y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Senden..."]}):"Aktualisierung"})}),J.submit&&(0,a.jsx)("div",{className:"alert alert-danger mt-3",children:J.submit})]})})]}),(0,a.jsxs)(x.A,{show:W,onHide:()=>Z(!1),centered:!0,children:[(0,a.jsx)(x.A.Header,{closeButton:!0,children:(0,a.jsx)(x.A.Title,{children:"Passwort zur\xfccksetzen"})}),(0,a.jsx)(x.A.Body,{children:(0,a.jsx)("form",{children:(0,a.jsx)("div",{className:"row my-md-4 my-2",children:(0,a.jsxs)("div",{className:"col-md-12",children:[(0,a.jsx)("span",{className:"me-4",children:"Neues Passwort:"}),(0,a.jsx)("span",{children:eu})]})})})})]})]})})},96446:(e,t,s)=>{"use strict";s.d(t,{F1:()=>n,OE:()=>r,OQ:()=>i,Ou:()=>d,W3:()=>o,Zs:()=>a,aF:()=>m,b6:()=>u,s_:()=>c,wz:()=>l,yZ:()=>h});let a="/api/qrcode/generate-qrcode",n="/api/qrcode/get-qrcode-data",i="/api/qrcode/verify-password",r="/api/qrcode/update-qrcode-data",o="/api/qrcode/get-qrcode-page-token",l="/api/auth/login",c="/api/auth/forgot-password",d="/api/auth/reset-password/",u="/api/auth/logout",h="/api/dashboard/get-user-data-by-page",m="/api/dashboard/reset-qrcode-password"},97612:(e,t,s)=>{"use strict";s.d(t,{i:()=>n});var a=s(61042);let n=()=>{let e=(0,a.d)();return{showSuccess:t=>e(t,"success"),showError:t=>e(t,"error"),showWarning:t=>e(t,"warning"),showInfo:t=>e(t,"info")}}},99572:(e,t,s)=>{"use strict";s.d(t,{Q:()=>l});var a=s(23464),n=s(49509);let i={API_URL:"http://127.0.0.1:5000/",AUTH_BACKEND:"Dummy",FIRE_BASE:{API_KEY:n.env.REACT_APP_APIKEY,AUTH_DOMAIN:n.env.REACT_APP_AUTHDOMAIN,PROJECTID:n.env.REACT_APP_PROJECTID,STORAGEBUCKET:n.env.REACT_APP_STORAGEBUCKET,MESSAGINGSENDERID:n.env.REACT_APP_MESSAGINGSENDERID,APPID:n.env.REACT_APP_APPID}};var r=s(79971);a.A.defaults.baseURL=i.API_URL;let o=i.API_URL;a.A.defaults.headers.post["Content-Type"]="application/json",a.A.interceptors.response.use(function(e){return e.data?e.data:e});class l{request(e){return new Promise((t,s)=>{this._axios.request(e).then(e=>{t(e.data)}).catch(e=>{var t;s((null==(t=e.response)?void 0:t.data)||e.message)})})}constructor(){var e=this;this._axios=a.A.create({baseURL:o,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.logout=()=>{(0,r.setCookie)("auth_token",""),window.location.href="/en/auth/login"},this.addRequestInterceptor=(e,t)=>{this._axios.interceptors.request.use(e,t)},this.addResponseInterceptor=(e,t)=>{this._axios.interceptors.response.use(e,t)},this.get=async function(t,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json";return e.request({method:"get",url:t,params:s,responseType:a})},this.create=async(e,t)=>await this.request(this.getOptionsConfig("post",e,t)),this.put=async(e,t)=>await this.request(this.getOptionsConfig("put",e,t)),this.update=async(e,t)=>await this.request(this.getOptionsConfig("patch",e,t)),this.delete=async(e,t)=>this.request({method:"delete",url:e,params:t}),this.getOptionsConfig=(e,t,s)=>{let a={"Content-Type":"application/json"};return s instanceof FormData&&delete a["Content-Type"],{method:e,url:t,data:s,headers:a}},this._axios.interceptors.response.use(e=>e,e=>{var t,s,a,n,i,r,o,l;return((null==(t=e.response)?void 0:t.status)===401&&this.logout(),(null==(s=e.response)?void 0:s.status)===400||(null==(a=e.response)?void 0:a.status)===500||(null==(n=e.response)?void 0:n.status)===401)?Promise.resolve(e.response):(((null==(r=e.response)||null==(i=r.data)?void 0:i.message)=="Token is not valid"||(null==(l=e.response)||null==(o=l.data)?void 0:o.message)=="No token, authorization denied")&&this.logout(),Promise.reject(e))})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[540,54,957,496,151,466,252,651,441,684,358],()=>t(17181)),_N_E=e.O()}]);