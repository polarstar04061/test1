(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{16938:(e,t,s)=>{"use strict";s.d(t,{BE:()=>d,Ck:()=>r,VO:()=>o,og:()=>h,pd:()=>l,r8:()=>c});var a=s(99572),n=s(96446);let i=new a.Q,r=e=>i.create(n.Zs,e),o=e=>i.get(n.F1,e),l=e=>i.get(n.Hv,e),c=e=>i.get(n.W3,e),d=e=>i.create(n.OQ,e),h=e=>i.update(n.OE,e)},17181:(e,t,s)=>{Promise.resolve().then(s.bind(s,92247))},50931:(e,t,s)=>{"use strict";s.d(t,{r:()=>r});var a=s(95155),n=s(35695),i=s(77335);function r(e){return function(t){(0,n.useRouter)();let s=(0,i.G)(e=>e.auth.isAuthenticated);return s?(0,a.jsx)(e,{...t}):null}}},61042:(e,t,s)=>{"use strict";s.d(t,{SnackbarProvider:()=>l,d:()=>c});var a=s(95155),n=s(12115),i=s(75824),r=s(9665);let o=(0,n.createContext)(null),l=e=>{let{children:t}=e,[s,l]=(0,n.useState)({open:!1,message:"",severity:"info"}),c=()=>l({...s,open:!1});return(0,a.jsxs)(o.Provider,{value:(e,t)=>{l({open:!0,message:e,severity:t})},children:[t,(0,a.jsx)(i.A,{open:s.open,autoHideDuration:3e3,onClose:c,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{top:"80px !important"},children:(0,a.jsx)(r.A,{onClose:c,severity:s.severity,sx:{width:"100%"},children:s.message})})]})},c=()=>(0,n.useContext)(o)},77335:(e,t,s)=>{"use strict";s.d(t,{G:()=>i,j:()=>n});var a=s(34540);let n=()=>(0,a.wA)(),i=a.d4},92247:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var a=s(95155),n=s(11656),i=s(66766),r=s(12115),o=s(69008),l=s(28890),c=s(78173),d=s(63954),h=s(41101),u=s(86220),m=s(73731),p=s(94862),g=s(87128),x=s(76380),v=s(51770),f=s(50931),j=s(99572),b=s(96446);let N=new j.Q,y=e=>N.get(b.yZ,e),A=e=>N.update(b.aF,e);var C=s(97612),k=s(16938),S=s(39365),w=s.n(S);s(30133);let O=(0,f.r)(function(){let{showSuccess:e,showError:t}=(0,C.i)(),[s,f]=(0,r.useState)([]),[j,b]=(0,r.useState)(!0),[N,S]=(0,r.useState)({page:0,pageSize:10}),[O,I]=(0,r.useState)(0),[P,E]=(0,r.useState)([]),[_,T]=(0,r.useState)({items:[]}),[R,q]=(0,r.useState)(null),[z,D]=(0,r.useState)(null),[M,B]=(0,r.useState)(""),[F,H]=(0,r.useState)(""),[U,K]=(0,r.useState)(),[G,Q]=(0,r.useState)({name:"",userId:"",description:"",category:"",contactOptions:{phone:!1,email:!1,push:!1},phoneNumber:"",email:""}),[L,W]=(0,r.useState)(!1),[Z,J]=(0,r.useState)(!1),[Y,V]=(0,r.useState)({}),[X,$]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),[es,ea]=(0,r.useState)(),[en,ei]=(0,r.useState)(null),[er,eo]=(0,r.useState)(""),[el,ec]=(0,r.useState)(!0),[ed,eh]=(0,r.useState)(!1),[eu,em]=(0,r.useState)(),ep=e=>"+"+e;(0,r.useEffect)(()=>{(async()=>{b(!0);try{var e,s;let a=N.page*N.pageSize,n=a+N.pageSize,i={startIndex:a,endIndex:n,field:(null==(e=P[0])?void 0:e.field)||"createdAt",sort:(null==(s=P[0])?void 0:s.sort)||"desc",searchText:M||""},r=await y(i);if(r.success){let e=r.userData;f(e),I(r.total)}else t(r.message)}catch(e){console.error("Error loading mock data:",e),t(e.message||"Backend-Fehler!")}finally{b(!1)}})()},[N,P,O,M,es]);let eg=(e,t)=>{q(e.currentTarget),D(t)},ex=()=>{q(null),D(null)},ev=async e=>{ex(),J(!0),H(e);try{let t=await A({qrId:e});em(t.newQRPassword)}catch(e){console.log(e.message),t(e.message)}},ef=async e=>{try{W(!0),H(e),ex();let t=await (0,k.pd)({qrId:e});if(t.success){var s,a,n;Q({name:t.data.name||"",userId:t.data.userId||"",description:t.data.description||"",category:t.data.category||"",contactOptions:{phone:(null==(s=t.data.contactOptions)?void 0:s.phone)||!1,email:(null==(a=t.data.contactOptions)?void 0:a.email)||!1,push:(null==(n=t.data.contactOptions)?void 0:n.push)||!1},phoneNumber:t.data.phoneNumber||"",email:t.data.email||""}),K(t.data.qrCodeImageUrl)}}catch(e){t(e.message),Q({name:"",userId:"",description:"",category:"",contactOptions:{phone:!1,email:!1,push:!1},phoneNumber:"",email:""})}finally{ec(!1)}},ej=()=>{let e={};return G.name.trim()||(e.name="Name ist erforderlich"),G.userId.trim()||(e.userId="Benutzername ist erforderlich"),G.category||(e.category="Kategorie ist erforderlich"),G.contactOptions.phone||G.contactOptions.email||G.contactOptions.push||(e.contactOptions="Mindestens eine Kontaktm\xf6glichkeit ist erforderlich"),G.contactOptions.phone&&!G.phoneNumber.trim()&&(e.phoneNumber="Telefonnummer ist erforderlich"),G.contactOptions.email&&!G.email.trim()&&(e.email="E-Mail-Adresse erforderlich"),V(e),0===Object.keys(e).length},eb=async s=>{if(s.preventDefault(),ej()){$(!0);try{let s,a={qrId:F,name:G.name,userId:G.userId,description:G.description,category:G.category,contactOptions:G.contactOptions,phoneNumber:G.phoneNumber,email:G.email};if((s=await (0,k.og)(a)).success){et(!0),e(s.message);let t=new Date;ea(t)}else t(s.message)}catch(e){var a;console.error("Submission error:",(null==(a=e.response)?void 0:a.data)||e.message),t(e.message||"Aktualisierung des QR-Codes fehlgeschlagen")}finally{$(!1)}}},eN=e=>{let{name:t,value:s,type:a}=e.target,n=e.target.checked;"checkbox"===a?Q(e=>({...e,contactOptions:{...e.contactOptions,[t]:n}})):Q(e=>({...e,[t]:s}))},ey=[{field:"name",headerName:"Name",flex:1,type:"string"},{field:"userId",headerName:"Benutzer-ID",flex:1,type:"string"},{field:"description",headerName:"Beschreibung",flex:2,type:"string"},{field:"email",headerName:"E-Mail",flex:2,type:"string"},{field:"phoneNumber",headerName:"Telefon",flex:1,type:"string",renderCell:e=>{var t;let s=null==(t=e.value)?void 0:t.toString().trim();return s?(0,a.jsx)(h.A,{label:ep(s),variant:"outlined",color:"primary",size:"small"}):null}},{field:"actions",type:"actions",headerName:"Aktionen",flex:1,getActions:e=>[(0,a.jsx)(u.A,{"aria-label":"more","aria-controls":"actions-menu-".concat(e.id),"aria-haspopup":"true",onClick:t=>eg(t,e.id),children:(0,a.jsx)(o.A,{})},"actions-".concat(e.id))]}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{height:"100%",width:"100%"},className:"page-container container",children:[(0,a.jsx)(m.A,{fullWidth:!0,variant:"outlined",placeholder:"Name suchen...",value:M,onChange:e=>B(e.target.value),InputProps:{startAdornment:(0,a.jsx)(p.A,{position:"start",children:(0,a.jsx)(d.A,{})})},sx:{mb:2}}),(0,a.jsx)(n.z,{rows:s,columns:ey,loading:j,rowCount:O,paginationMode:"server",sortingMode:"server",filterMode:"server",paginationModel:N,onPaginationModelChange:S,sortModel:P,onSortModelChange:E,filterModel:_,onFilterModelChange:T,pageSizeOptions:[5,10,25],localeText:{paginationRowsPerPage:"Zeilen pro Seite:"},disableRowSelectionOnClick:!0}),(0,a.jsxs)(g.A,{id:"actions-menu",anchorEl:R,open:!!R,onClose:ex,MenuListProps:{"aria-labelledby":"actions-menu"},children:[(0,a.jsxs)(x.A,{onClick:()=>z&&ef(z),children:[(0,a.jsx)(l.A,{fontSize:"small",sx:{mr:1}})," Bearbeiten"]}),(0,a.jsxs)(x.A,{onClick:()=>z&&ev(z),children:[(0,a.jsx)(c.A,{fontSize:"small",sx:{mr:1}})," Passwort zur\xfccksetzen"]})]})]}),(0,a.jsxs)(v.A,{show:L,onHide:()=>W(!1),centered:!0,children:[(0,a.jsx)(v.A.Header,{closeButton:!0,children:(0,a.jsx)(v.A.Title,{children:"Informationen bearbeiten"})}),(0,a.jsx)(v.A.Body,{children:(0,a.jsxs)("form",{onSubmit:eb,children:[(0,a.jsx)("div",{className:"d-flex justify-content-center",children:(0,a.jsx)(i.default,{src:U||"",alt:"QR Code",className:" object-fit-contain flex-grow-1",width:200,height:200,style:{maxWidth:"100%",maxHeight:"200px"}})}),(0,a.jsxs)("div",{className:"row mt-md-4 mt-2",children:[(0,a.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,a.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name*"}),(0,a.jsx)("input",{type:"text",className:"form-control ".concat(Y.name?"is-invalid":""),id:"name",name:"name",value:G.name,onChange:eN,disabled:!0}),Y.name&&(0,a.jsx)("div",{className:"invalid-feedback",children:Y.name})]}),(0,a.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,a.jsx)("label",{htmlFor:"userId",className:"form-label",children:"Benutzer-ID*"}),(0,a.jsx)("input",{type:"text",className:"form-control ".concat(Y.userId?"is-invalid":""),id:"userId",name:"userId",value:G.userId,onChange:eN,disabled:!0}),Y.userId&&(0,a.jsx)("div",{className:"invalid-feedback",children:Y.userId})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{htmlFor:"category",className:"form-label",children:"Kategorie*"}),(0,a.jsxs)("select",{className:"form-select ".concat(Y.category?"is-invalid":""),id:"category",name:"category",value:G.category,onChange:eN,children:[(0,a.jsx)("option",{value:"",children:"W\xe4hlen Sie eine Option aus"}),(0,a.jsx)("option",{value:"dog",children:"Hund"}),(0,a.jsx)("option",{value:"cat",children:"Katze"})]}),Y.category&&(0,a.jsx)("div",{className:"invalid-feedback",children:Y.category})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{htmlFor:"description",className:"form-label",children:"Beschreibung"}),(0,a.jsx)("textarea",{className:"form-control",id:"description",name:"description",rows:1,value:G.description,onChange:eN})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Kontaktm\xf6glichkeiten*"}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"phoneCheck",name:"phone",checked:G.contactOptions.phone,onChange:eN}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"phoneCheck",children:"Telefon"})]}),G.contactOptions.phone&&(0,a.jsxs)("div",{className:"mt-2 ms-4",children:[(0,a.jsx)(w(),{country:"us",value:G.phoneNumber,onChange:e=>Q(t=>({...t,phoneNumber:e})),inputClass:" ".concat(Y.phoneNumber?"is-invalid":""),containerClass:Y.phoneNumber?"is-invalid":"",inputStyle:{width:"100%",height:"38px"}}),Y.phoneNumber&&(0,a.jsx)("div",{className:"invalid-feedback",children:Y.phoneNumber})]}),(0,a.jsxs)("div",{className:"form-check mt-2",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"emailCheck",name:"email",checked:G.contactOptions.email,onChange:eN}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"emailCheck",children:"E-Mail"})]}),G.contactOptions.email&&(0,a.jsxs)("div",{className:"mt-2 ms-4",children:[(0,a.jsx)("input",{type:"email",className:"form-control ".concat(Y.email?"is-invalid":""),id:"email",name:"email",placeholder:"Email address",value:G.email,onChange:eN}),Y.email&&(0,a.jsx)("div",{className:"invalid-feedback",children:Y.email})]}),(0,a.jsxs)("div",{className:"form-check mt-2",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"pushCheck",name:"push",checked:G.contactOptions.push,onChange:eN}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"pushCheck",children:"Push-Benachrichtigungen"})]})]}),Y.contactOptions&&(0,a.jsx)("div",{className:"text-danger mb-2",style:{fontSize:"0.875em"},children:Y.contactOptions}),(0,a.jsx)("div",{className:"d-flex justify-content-center mt-5 gap-3",children:(0,a.jsx)("button",{type:"submit",className:"btn btn-primary border-r-50",disabled:X,children:X?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Senden..."]}):"Aktualisierung"})}),Y.submit&&(0,a.jsx)("div",{className:"alert alert-danger mt-3",children:Y.submit})]})})]}),(0,a.jsxs)(v.A,{show:Z,onHide:()=>J(!1),centered:!0,children:[(0,a.jsx)(v.A.Header,{closeButton:!0,children:(0,a.jsx)(v.A.Title,{children:"Passwort zur\xfccksetzen"})}),(0,a.jsx)(v.A.Body,{children:(0,a.jsx)("form",{children:(0,a.jsx)("div",{className:"row my-md-4 my-2",children:(0,a.jsxs)("div",{className:"col-md-12",children:[(0,a.jsx)("span",{className:"me-4",children:"Neues Passwort:"}),(0,a.jsx)("span",{children:eu})]})})})})]})]})})},96446:(e,t,s)=>{"use strict";s.d(t,{F1:()=>n,Hv:()=>i,OE:()=>o,OQ:()=>r,Ou:()=>h,W3:()=>l,Zs:()=>a,aF:()=>p,b6:()=>u,s_:()=>d,wz:()=>c,yZ:()=>m});let a="/api/qrcode/generate-qrcode",n="/api/qrcode/get-qrcode-data",i="/api/qrcode/get-qrcode-data-by-admin",r="/api/qrcode/verify-password",o="/api/qrcode/update-qrcode-data",l="/api/qrcode/get-qrcode-page-token",c="/api/auth/login",d="/api/auth/forgot-password",h="/api/auth/reset-password/",u="/api/auth/logout",m="/api/dashboard/get-user-data-by-page",p="/api/dashboard/reset-qrcode-password"},97612:(e,t,s)=>{"use strict";s.d(t,{i:()=>n});var a=s(61042);let n=()=>{let e=(0,a.d)();return{showSuccess:t=>e(t,"success"),showError:t=>e(t,"error"),showWarning:t=>e(t,"warning"),showInfo:t=>e(t,"info")}}},99572:(e,t,s)=>{"use strict";s.d(t,{Q:()=>l});var a=s(23464),n=s(49509);let i={API_URL:"https://deinetierfamilie.com/",AUTH_BACKEND:"Dummy",FIRE_BASE:{API_KEY:n.env.REACT_APP_APIKEY,AUTH_DOMAIN:n.env.REACT_APP_AUTHDOMAIN,PROJECTID:n.env.REACT_APP_PROJECTID,STORAGEBUCKET:n.env.REACT_APP_STORAGEBUCKET,MESSAGINGSENDERID:n.env.REACT_APP_MESSAGINGSENDERID,APPID:n.env.REACT_APP_APPID}};var r=s(79971);a.A.defaults.baseURL=i.API_URL;let o=i.API_URL;a.A.defaults.headers.post["Content-Type"]="application/json",a.A.interceptors.response.use(function(e){return e.data?e.data:e});class l{request(e){return new Promise((t,s)=>{this._axios.request(e).then(e=>{t(e.data)}).catch(e=>{var t;s((null==(t=e.response)?void 0:t.data)||e.message)})})}constructor(){var e=this;this._axios=a.A.create({baseURL:o,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.logout=()=>{(0,r.setCookie)("auth_token",""),window.location.href="/en/auth/login"},this.addRequestInterceptor=(e,t)=>{this._axios.interceptors.request.use(e,t)},this.addResponseInterceptor=(e,t)=>{this._axios.interceptors.response.use(e,t)},this.get=async function(t,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json";return e.request({method:"get",url:t,params:s,responseType:a})},this.create=async(e,t)=>await this.request(this.getOptionsConfig("post",e,t)),this.put=async(e,t)=>await this.request(this.getOptionsConfig("put",e,t)),this.update=async(e,t)=>await this.request(this.getOptionsConfig("patch",e,t)),this.delete=async(e,t)=>this.request({method:"delete",url:e,params:t}),this.getOptionsConfig=(e,t,s)=>{let a={"Content-Type":"application/json"};return s instanceof FormData&&delete a["Content-Type"],{method:e,url:t,data:s,headers:a}},this._axios.interceptors.response.use(e=>e,e=>{var t,s,a,n,i,r,o,l;return((null==(t=e.response)?void 0:t.status)===401&&this.logout(),(null==(s=e.response)?void 0:s.status)===400||(null==(a=e.response)?void 0:a.status)===500||(null==(n=e.response)?void 0:n.status)===401)?Promise.resolve(e.response):(((null==(r=e.response)||null==(i=r.data)?void 0:i.message)=="Token is not valid"||(null==(l=e.response)||null==(o=l.data)?void 0:o.message)=="No token, authorization denied")&&this.logout(),Promise.reject(e))})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[540,54,957,671,151,466,822,651,441,684,358],()=>t(17181)),_N_E=e.O()}]);