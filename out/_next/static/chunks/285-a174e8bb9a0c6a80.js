"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{16938:(e,t,a)=>{a.d(t,{BE:()=>d,Ck:()=>i,VO:()=>o,og:()=>m,pd:()=>c,r8:()=>l});var n=a(99572),s=a(96446);let r=new n.Q,i=e=>r.create(s.Zs,e),o=e=>r.get(s.F1,e),c=e=>r.get(s.Hv,e),l=e=>r.get(s.W3,e),d=e=>r.create(s.OQ,e),m=e=>r.update(s.OE,e)},32960:(e,t,a)=>{a.d(t,{Am:()=>i,Ay:()=>c});var n=a(12115),s=a(95155);let r=["as","disabled"];function i({tagName:e,disabled:t,href:a,target:n,rel:s,role:r,onClick:i,tabIndex:o=0,type:c}){e||(e=null!=a||null!=n||null!=s?"a":"button");let l={tagName:e};if("button"===e)return[{type:c||"button",disabled:t},l];let d=n=>{var s;if(!t&&("a"!==e||(s=a)&&"#"!==s.trim())||n.preventDefault(),t)return void n.stopPropagation();null==i||i(n)};return"a"===e&&(a||(a="#"),t&&(a=void 0)),[{role:null!=r?r:"button",disabled:void 0,tabIndex:t?void 0:o,href:a,target:"a"===e?n:void 0,"aria-disabled":t||void 0,rel:"a"===e?s:void 0,onClick:d,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),d(e))}},l]}let o=n.forwardRef((e,t)=>{let{as:a,disabled:n}=e,o=function(e,t){if(null==e)return{};var a={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}(e,r),[c,{tagName:l}]=i(Object.assign({tagName:a,disabled:n},o));return(0,s.jsx)(l,Object.assign({},o,c,{ref:t}))});o.displayName="Button";let c=o},60902:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(29300),s=a.n(n),r=a(12115),i=a(32960),o=a(97390),c=a(95155);let l=r.forwardRef((e,t)=>{let{as:a,bsPrefix:n,variant:r="primary",size:l,active:d=!1,disabled:m=!1,className:u,...h}=e,p=(0,o.oU)(n,"btn"),[g,{tagName:v}]=(0,i.Am)({tagName:a,disabled:m,...h});return(0,c.jsx)(v,{...g,...h,ref:t,disabled:m,className:s()(u,p,d&&"active",r&&"".concat(p,"-").concat(r),l&&"".concat(p,"-").concat(l),h.href&&m&&"disabled")})});l.displayName="Button";let d=l},61042:(e,t,a)=>{a.d(t,{SnackbarProvider:()=>c,d:()=>l});var n=a(95155),s=a(12115),r=a(75824),i=a(9665);let o=(0,s.createContext)(null),c=e=>{let{children:t}=e,[a,c]=(0,s.useState)({open:!1,message:"",severity:"info"}),l=()=>c({...a,open:!1});return(0,n.jsxs)(o.Provider,{value:(e,t)=>{c({open:!0,message:e,severity:t})},children:[t,(0,n.jsx)(r.A,{open:a.open,autoHideDuration:3e3,onClose:l,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{top:"80px !important"},children:(0,n.jsx)(i.A,{onClose:l,severity:a.severity,sx:{width:"100%"},children:a.message})})]})},l=()=>(0,s.useContext)(o)},91867:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(29300),s=a.n(n),r=a(12115),i=a(97390),o=a(95155);let c=r.forwardRef((e,t)=>{let{bsPrefix:a,variant:n,animation:r="border",size:c,as:l="div",className:d,...m}=e;a=(0,i.oU)(a,"spinner");let u="".concat(a,"-").concat(r);return(0,o.jsx)(l,{ref:t,...m,className:s()(d,u,c&&"".concat(u,"-").concat(c),n&&"text-".concat(n))})});c.displayName="Spinner";let l=c},96446:(e,t,a)=>{a.d(t,{F1:()=>s,Hv:()=>r,OE:()=>o,OQ:()=>i,Ou:()=>m,W3:()=>c,Zs:()=>n,aF:()=>p,b6:()=>u,s_:()=>d,wz:()=>l,yZ:()=>h});let n="/api/qrcode/generate-qrcode",s="/api/qrcode/get-qrcode-data",r="/api/qrcode/get-qrcode-data-by-admin",i="/api/qrcode/verify-password",o="/api/qrcode/update-qrcode-data",c="/api/qrcode/get-qrcode-page-token",l="/api/auth/login",d="/api/auth/forgot-password",m="/api/auth/reset-password/",u="/api/auth/logout",h="/api/dashboard/get-user-data-by-page",p="/api/dashboard/reset-qrcode-password"},97285:(e,t,a)=>{a.d(t,{A:()=>v});var n=a(95155),s=a(66766),r=a(97612),i=a(12115),o=a(39365),c=a.n(o),l=a(91867),d=a(51770),m=a(60902),u=a(79835);function h(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)e[n]=a[n]}return e}var p=function e(t,a){function n(e,n,s){if("undefined"!=typeof document){"number"==typeof(s=h({},a,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var i in s)s[i]&&(r+="; "+i,!0!==s[i]&&(r+="="+s[i].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+r}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],n={},s=0;s<a.length;s++){var r=a[s].split("="),i=r.slice(1).join("=");try{var o=decodeURIComponent(r[0]);if(n[o]=t.read(i,o),e===o)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",h({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,h({},this.attributes,t))},withConverter:function(t){return e(h({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),g=a(16938);function v(e){let{qrId:t}=e,{showSuccess:a,showError:o}=(0,r.i)(),[h,v]=(0,i.useState)({name:"",userId:"",description:"",category:"",contactOptions:{phone:!1,email:!1,push:!1},phoneNumber:"",email:""}),[x,b]=(0,i.useState)(null),[f,j]=(0,i.useState)(!1),[y,N]=(0,i.useState)(!1),[C,w]=(0,i.useState)({}),[A,k]=(0,i.useState)(!1),[I,O]=(0,i.useState)(!1),[S,E]=(0,i.useState)(null),[R,_]=(0,i.useState)(""),[P,q]=(0,i.useState)(!0),[D,T]=(0,i.useState)(""),[U,B]=(0,i.useState)(""),[F,z]=(0,i.useState)(!1),[K,L]=(0,i.useState)(!1),[H,G]=(0,i.useState)(),[M,Q]=(0,i.useState)();(0,i.useEffect)(()=>{let e=p.get("qr_page_token");if(e)try{let t=JSON.parse(e),a=t.expires&&t.expires<Date.now();G("exists"),Q(a?"expired":"valid")}catch(e){G("exists"),Q("unknown")}else G("does not exist"),Q("not applicable");t&&(async()=>{q(!0);try{let s=await (0,g.VO)({qrId:t});if(s.success){var e,a,n;v({name:s.data.name||"",userId:s.data.userId||"",description:s.data.description||"",category:s.data.category||"",contactOptions:{phone:(null==(e=s.data.contactOptions)?void 0:e.phone)||!1,email:(null==(a=s.data.contactOptions)?void 0:a.email)||!1,push:(null==(n=s.data.contactOptions)?void 0:n.push)||!1},phoneNumber:s.data.phoneNumber||"",email:s.data.email||""}),b(s.data.qrCodeImageUrl)}}catch(e){o(e.message),v({name:"",userId:"",description:"",category:"",contactOptions:{phone:!1,email:!1,push:!1},phoneNumber:"",email:""})}finally{q(!1)}})()},[t]);let W=e=>{let{name:t,value:a,type:n}=e.target,s=e.target.checked;"checkbox"===n?v(e=>({...e,contactOptions:{...e.contactOptions,[t]:s}})):v(e=>({...e,[t]:a}))},J=()=>{let e={};return h.name.trim()||(e.name="Name ist erforderlich"),h.userId.trim()||(e.userId="Benutzername ist erforderlich"),h.category||(e.category="Kategorie ist erforderlich"),h.contactOptions.phone||h.contactOptions.email||h.contactOptions.push||(e.contactOptions="Mindestens eine Kontaktm\xf6glichkeit ist erforderlich"),h.contactOptions.phone&&!h.phoneNumber.trim()&&(e.phoneNumber="Telefonnummer ist erforderlich"),h.contactOptions.email&&!h.email.trim()&&(e.email="E-Mail-Adresse erforderlich"),w(e),0===Object.keys(e).length},Z=async e=>{if(e.preventDefault(),J()){k(!0);try{let e,n={qrId:K?t:"",name:h.name,userId:h.userId,description:h.description,category:h.category,contactOptions:h.contactOptions,phoneNumber:h.phoneNumber,email:h.email};t?(e=await (0,g.og)(n)).success?(a(e.message),O(!0)):o(e.message):(e=await (0,g.Ck)(n)).success?(O(!0),j(!0),E(e.qrCodeData),_(e.downloadUrl),a(e.message),B(e.password)):o(e.message)}catch(e){var n;console.error("Submission error:",(null==(n=e.response)?void 0:n.data)||e.message),o(e.message||"QR-Code konnte nicht generiert werden")}finally{k(!1)}}},V=async()=>{try{let e=await (0,g.BE)({qrId:t,password:D});e.success?(a(e.message),L(!0),N(!1)):o(e.message)}catch(t){var e;L(!0),console.error("Submission error:",(null==(e=t.response)?void 0:e.data)||t.message),o(t.message||"Passwort konnte nicht \xfcberpr\xfcft werden")}finally{z(!1)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"container mt-5 page-container",children:(0,n.jsx)("div",{className:"row justify-content-center",children:(0,n.jsx)("div",{className:"col-md-8",children:(0,n.jsx)("div",{className:"card shadow",children:(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("div",{className:"d-flex justify-content-center",children:(0,n.jsx)(s.default,{src:"https://identqr.de/files/99/Logo_K&D_herz_orange.png",alt:"Allianz D\xf6pke / DeineTierfamilie.de",className:" object-fit-contain flex-grow-1",width:200,height:200,style:{maxWidth:"100%",maxHeight:"200px"}})}),P&&t?(0,n.jsx)("div",{className:"d-flex justify-content-center",children:(0,n.jsx)(l.A,{})}):(0,n.jsxs)("form",{onSubmit:Z,children:[(0,n.jsxs)("div",{className:"row mt-md-4 mt-2",children:[(0,n.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,n.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name*"}),(0,n.jsx)("input",{type:"text",className:"form-control ".concat(C.name?"is-invalid":""),id:"name",name:"name",value:h.name,onChange:W,disabled:!!t&&!K}),C.name&&(0,n.jsx)("div",{className:"invalid-feedback",children:C.name})]}),(0,n.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,n.jsx)("label",{htmlFor:"userId",className:"form-label",children:"Benutzer-ID*"}),(0,n.jsx)("input",{type:"text",className:"form-control ".concat(C.userId?"is-invalid":""),id:"userId",name:"userId",value:h.userId,onChange:W,disabled:!!t&&!K}),C.userId&&(0,n.jsx)("div",{className:"invalid-feedback",children:C.userId})]})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"category",className:"form-label",children:"Kategorie*"}),(0,n.jsxs)("select",{className:"form-select ".concat(C.category?"is-invalid":""),id:"category",name:"category",value:h.category,onChange:W,disabled:!!t&&!K,children:[(0,n.jsx)("option",{value:"",children:"W\xe4hlen Sie eine Option aus"}),(0,n.jsx)("option",{value:"dog",children:"Hund"}),(0,n.jsx)("option",{value:"cat",children:"Katze"})]}),C.category&&(0,n.jsx)("div",{className:"invalid-feedback",children:C.category})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"description",className:"form-label",children:"Beschreibung"}),(0,n.jsx)("textarea",{className:"form-control",id:"description",name:"description",rows:1,value:h.description,onChange:W,disabled:!!t&&!K})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label",children:"Kontaktm\xf6glichkeiten*"}),(0,n.jsxs)("div",{className:"form-check",children:[(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",id:"phoneCheck",name:"phone",checked:h.contactOptions.phone,onChange:W}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"phoneCheck",children:"Telefon"})]}),h.contactOptions.phone&&(0,n.jsxs)("div",{className:"mt-2 ms-4",children:[(0,n.jsx)(c(),{country:"us",value:h.phoneNumber,disabled:!!t&&!K,onChange:e=>v(t=>({...t,phoneNumber:e})),inputClass:" ".concat(C.phoneNumber?"is-invalid":""),containerClass:C.phoneNumber?"is-invalid":"",inputStyle:{width:"100%",height:"38px"}}),C.phoneNumber&&(0,n.jsx)("div",{className:"invalid-feedback",children:C.phoneNumber})]}),(0,n.jsxs)("div",{className:"form-check mt-2",children:[(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",id:"emailCheck",name:"email",checked:h.contactOptions.email,onChange:W}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"emailCheck",children:"E-Mail"})]}),h.contactOptions.email&&(0,n.jsxs)("div",{className:"mt-2 ms-4",children:[(0,n.jsx)("input",{type:"email",className:"form-control ".concat(C.email?"is-invalid":""),id:"email",name:"email",placeholder:"Email address",value:h.email,onChange:W,disabled:!!t&&!K}),C.email&&(0,n.jsx)("div",{className:"invalid-feedback",children:C.email})]}),(0,n.jsxs)("div",{className:"form-check mt-2",children:[(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",id:"pushCheck",name:"push",checked:h.contactOptions.push,onChange:W}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"pushCheck",children:"Push-Benachrichtigungen"})]})]}),C.contactOptions&&(0,n.jsx)("div",{className:"text-danger mb-2",style:{fontSize:"0.875em"},children:C.contactOptions}),(0,n.jsxs)("div",{className:"d-flex justify-content-center mt-5 gap-3",children:[(!t||K)&&(0,n.jsx)("button",{type:"submit",className:"btn btn-primary border-r-50",disabled:A,children:A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Senden..."]}):"Aktivieren"}),t&&(0,n.jsx)("button",{type:"button",className:"btn btn-secondary border-r-50",onClick:()=>N(!0),children:"Bearbeiten"})]}),C.submit&&(0,n.jsx)("div",{className:"alert alert-danger mt-3",children:C.submit})]})]})})})})}),(0,n.jsxs)(d.A,{show:f,onHide:()=>j(!1),centered:!0,children:[(0,n.jsxs)(d.A.Body,{className:"text-center",children:[(0,n.jsx)("div",{children:R?(0,n.jsx)("img",{id:"qr-code-svg",src:R,alt:"QR Code",style:{maxWidth:"100%"}}):(0,n.jsx)("p",{children:"Kein QR-Code verf\xfcgbar."})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"me-3",children:"Passwort:"}),(0,n.jsx)("span",{children:U})]})]}),(0,n.jsxs)(d.A.Footer,{children:[(0,n.jsx)(m.A,{variant:"primary",onClick:()=>{if(!S)return;let e=document.getElementById("qr-code-svg");if(!e)return;let t=document.createElement("img"),a=e.cloneNode(!0),n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("fill","white"),a.insertBefore(n,a.firstChild);let s=new XMLSerializer().serializeToString(a),r=document.createElement("canvas"),i=r.getContext("2d");if(!i)return void console.error("Could not get canvas context");t.onload=()=>{r.width=4*t.width,r.height=4*t.height,i.scale(4,4),i.drawImage(t,0,0);let e=r.toDataURL("image/png"),a=document.createElement("a");a.download="".concat(h.name,"_").concat(h.userId,"_qrcode.png"),a.href=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)},t.onerror=()=>{let e=new Blob([s],{type:"image/svg+xml"}),t=URL.createObjectURL(e),a=document.createElement("a");a.download="".concat(h.name,"_").concat(h.userId,"_qrcode.svg"),a.href=t,a.click(),URL.revokeObjectURL(t)},t.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(s)))},children:"QR-Code herunterladen"}),(0,n.jsx)(m.A,{variant:"secondary",onClick:()=>j(!1),children:"Schlie\xdfen"})]})]}),(0,n.jsxs)(d.A,{show:y,onHide:()=>N(!1),centered:!0,children:[(0,n.jsx)(d.A.Header,{closeButton:!0,children:(0,n.jsx)(d.A.Title,{children:"Informationen bearbeiten"})}),(0,n.jsx)(d.A.Body,{children:(0,n.jsxs)(u.A.Group,{controlId:"formPassword",children:[(0,n.jsx)(u.A.Label,{children:"Passwort"}),(0,n.jsx)(u.A.Control,{type:"password",placeholder:"Geben Sie Ihr Passwort ein",value:D,onChange:e=>T(e.target.value),disabled:A}),(0,n.jsx)(u.A.Text,{className:"text-muted",children:"Bitte geben Sie Ihr Passwort ein, um die \xc4nderungen zu best\xe4tigen"})]})}),(0,n.jsxs)(d.A.Footer,{children:[(0,n.jsx)(m.A,{variant:"secondary",onClick:()=>N(!1),disabled:F,children:"Schlie\xdfen"}),(0,n.jsx)(m.A,{variant:"primary",onClick:V,disabled:!D||F,children:A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"spinner-border spinner-border-sm me-2","aria-hidden":"true"}),"Best\xe4tigen..."]}):"Best\xe4tigen"})]})]})]})}a(30133)},97612:(e,t,a)=>{a.d(t,{i:()=>s});var n=a(61042);let s=()=>{let e=(0,n.d)();return{showSuccess:t=>e(t,"success"),showError:t=>e(t,"error"),showWarning:t=>e(t,"warning"),showInfo:t=>e(t,"info")}}},99572:(e,t,a)=>{a.d(t,{Q:()=>c});var n=a(23464),s=a(49509);let r={API_URL:"https://deinetierfamilie.com/",AUTH_BACKEND:"Dummy",FIRE_BASE:{API_KEY:s.env.REACT_APP_APIKEY,AUTH_DOMAIN:s.env.REACT_APP_AUTHDOMAIN,PROJECTID:s.env.REACT_APP_PROJECTID,STORAGEBUCKET:s.env.REACT_APP_STORAGEBUCKET,MESSAGINGSENDERID:s.env.REACT_APP_MESSAGINGSENDERID,APPID:s.env.REACT_APP_APPID}};var i=a(79971);n.A.defaults.baseURL=r.API_URL;let o=r.API_URL;n.A.defaults.headers.post["Content-Type"]="application/json",n.A.interceptors.response.use(function(e){return e.data?e.data:e});class c{request(e){return new Promise((t,a)=>{this._axios.request(e).then(e=>{t(e.data)}).catch(e=>{var t;a((null==(t=e.response)?void 0:t.data)||e.message)})})}constructor(){var e=this;this._axios=n.A.create({baseURL:o,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.logout=()=>{(0,i.setCookie)("auth_token",""),window.location.href="/en/auth/login"},this.addRequestInterceptor=(e,t)=>{this._axios.interceptors.request.use(e,t)},this.addResponseInterceptor=(e,t)=>{this._axios.interceptors.response.use(e,t)},this.get=async function(t,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json";return e.request({method:"get",url:t,params:a,responseType:n})},this.create=async(e,t)=>await this.request(this.getOptionsConfig("post",e,t)),this.put=async(e,t)=>await this.request(this.getOptionsConfig("put",e,t)),this.update=async(e,t)=>await this.request(this.getOptionsConfig("patch",e,t)),this.delete=async(e,t)=>this.request({method:"delete",url:e,params:t}),this.getOptionsConfig=(e,t,a)=>{let n={"Content-Type":"application/json"};return a instanceof FormData&&delete n["Content-Type"],{method:e,url:t,data:a,headers:n}},this._axios.interceptors.response.use(e=>e,e=>{var t,a,n,s,r,i,o,c;return((null==(t=e.response)?void 0:t.status)===401&&this.logout(),(null==(a=e.response)?void 0:a.status)===400||(null==(n=e.response)?void 0:n.status)===500||(null==(s=e.response)?void 0:s.status)===401)?Promise.resolve(e.response):(((null==(i=e.response)||null==(r=i.data)?void 0:r.message)=="Token is not valid"||(null==(c=e.response)||null==(o=c.data)?void 0:o.message)=="No token, authorization denied")&&this.logout(),Promise.reject(e))})}}}}]);